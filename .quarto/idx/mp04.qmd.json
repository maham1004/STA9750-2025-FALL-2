{"title":"STA 9750 — Mini-Project 04","markdown":{"yaml":{"title":"STA 9750 — Mini-Project 04","author":"Maham Hassan","date":"December 1, 2025","format":{"html":{"theme":"morph","code-fold":true,"toc":true}},"editor":"source"},"headingText":"Introduction","containsRefs":false,"markdown":"\n\nEvery month, the Bureau of Labor Statistics releases the jobs report: one number that can move the stock market, shift interest rate expectations, and shape the political conversation overnight. Because so much rides on it, the accuracy of the jobs number matters. When President Trump fired BLS Commissioner Erika McEntarfer in 2025, arguing that the agency had produced “inflated” job figures, the decision immediately set off a national debate.\n\nThis project takes a step back from the politics and looks directly at the data behind that debate. Using employment levels and revision tables from 1979 to 2025, we examine how often the initial jobs numbers are revised, how large those revisions tend to be, and whether any patterns line up with the political claims being made. We summarize long-run trends, build visualizations, and run statistical tests to see what the evidence actually shows. \n\n\n# CES Non Farm Payroll Employment (1979–2025)\n```{r, results='hide', message=FALSE, warning=FALSE}\nlibrary(dplyr)\nlibrary(purrr)\nlibrary(stringr)\nlibrary(readr)\nlibrary(rvest)\nlibrary(httr2)\nlibrary(lubridate)\nlibrary(DT)\n\n\n# Task 1 — CES Total Nonfarm Payroll Employment\n\n```{r, results='hide', message=FALSE, warning=FALSE}\nlibrary(httr2)\nlibrary(rvest)\nlibrary(dplyr)\nlibrary(stringr)\nlibrary(lubridate)\nlibrary(DT)\n\n# Build the base request to the BLS Data Finder endpoint\nreq <- request(\"https://data.bls.gov\") |>\n  req_url_path_append(\"pdq\") |>\n  req_url_path_append(\"SurveyOutputServlet\") |>\n  req_method(\"POST\") |>\n  req_body_form(\n    request_action    = \"get_data\",\n    reformat          = \"true\",\n    from_results_page = \"true\",\n    from_year         = \"1979\",\n    to_year           = \"2025\",\n    initial_request   = \"false\",\n    data_tool         = \"surveymost\",\n    series_id         = \"CES0000000001\"\n  ) |>\n  # increase the time allowed for the request \n  req_timeout(60)\n\n# Perform the request\nresp <- req_perform(req)\n\n# Turn the response body into an HTML document\nces_page <- resp |>\n  resp_body_string() |>\n  read_html()\n\n# Extract all tables\nces_tables <- ces_page |>\n  html_elements(\"table\")\n\n# The second table holds the time series\nces_tbl_raw <- ces_tables[[2]] |>\n  html_table()\n\n# Reshape wide to long \nces_long <- ces_tbl_raw |>\n  tidyr::pivot_longer(\n    cols = Jan:Dec,\n    names_to  = \"month\",\n    values_to = \"level\"\n  )\n\n# Clean types and build a proper date column\nces_clean <- ces_long |>\n  mutate(\n    date  = ym(paste(Year, month)),      \n    level = as.numeric(level)\n  ) |>\n  select(date, level) |>\n  filter(!is.na(date), !is.na(level)) |>\n  filter(date >= as.Date(\"1979-01-01\"),\n         date <= as.Date(\"2025-06-01\")) |>\n  arrange(date)\n\nces_final <- ces_clean\n\n#  interactive table \ndatatable(\n  ces_final,\n  rownames = FALSE,\n  options = list(\n    pageLength = 5,\n    autoWidth  = TRUE,\n    dom        = \"tip\",\n    columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n  )\n) |>\n  formatStyle(\n    columns = names(ces_final),\n    `text-align` = \"center\"\n  ) |>\n  htmlwidgets::prependContent(\n    htmltools::tags$h3(\n      \"CES Total Nonfarm Payroll Employment (Final Estimates, 1979–2025)\",\n      style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n    )\n  )\n\nlibrary(DT)\n\n# Ensure the CES data is sorted correctly\nces_display <- ces_final |>\n  arrange(date)\n\n# interactive table\ndatatable(\n  ces_display,\n  rownames = FALSE,\n  options = list(\n    pageLength = 5,\n    autoWidth = TRUE,\n    dom = \"tip\",\n    columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n  )\n) |>\n  formatStyle(\n    columns = names(ces_display),\n    `text-align` = \"center\"\n  ) |>\n  htmlwidgets::prependContent(\n    htmltools::tags$h3(\n      \"CES Total Nonfarm Payroll Employment (Final Estimates, 1979–2025)\",\n      style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n    )\n  )\n```\n\n```{r}\n\ndatatable(\n  ces_display,\n  rownames = FALSE,\n  options = list(\n    pageLength = 12,\n    autoWidth = TRUE,\n    dom = \"tip\",\n    columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n  )\n) |>\n  formatStyle(\n    columns = names(ces_display),\n    `text-align` = \"center\"\n  ) |>\n  htmlwidgets::prependContent(\n    htmltools::tags$h3(\n      \"CES Total Nonfarm Payroll Employment (Final Estimates, 1979–2025)\",\n      style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n    )\n  )\n```\n\n---\n\n# CES Annual Revision Tables (1979–2025)\n```{r, results='hide', message=FALSE, warning=FALSE}\nlibrary(httr2)\nlibrary(rvest)\nlibrary(dplyr)\nlibrary(stringr)\nlibrary(lubridate)\nlibrary(purrr)\nlibrary(tibble)\n\n# Request the CES revisions page from BLS with a longer timeout\nrev_req <- request(\"https://www.bls.gov\") |>\n  req_url_path(\"web\", \"empsit\", \"cesnaicsrev.htm\") |>\n  req_headers(\n    `User-Agent` = \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:143.0) Gecko/20100101 Firefox/143.0\"\n  ) |>\n  req_timeout(60)   # allow up to 60 seconds for this request\n\nrev_resp <- rev_req |>\n  req_perform()\n\nrev_page <- rev_resp |>\n  resp_body_html()\n\n# Function to extract CES revisions for a single year\nget_ces_revisions_year <- function(yr, page = rev_page) {\n  # locate the table for this year using its id\n  year_node <- page |>\n    html_element(paste0(\"#\", yr))\n  \n  # if year not found, return an empty tibble with the right columns\n  if (is.null(year_node)) {\n    return(tibble(\n      date     = as.Date(character()),\n      original = integer(),\n      final    = integer(),\n      revision = integer()\n    ))\n  }\n  \n  # read the table body, no header\n  year_tbl <- year_node |>\n    html_element(\"tbody\") |>\n    html_table(header = FALSE)\n  \n  year_tbl |>\n    as_tibble() |>\n    # first 12 rows are Jan–Dec\n    slice(1:12) |>\n    transmute(\n      month    = X1,\n      year     = as.integer(X2),\n      original = as.integer(X3),\n      final    = as.integer(X5),\n      month_clean = stringr::str_replace(month, \"\\\\.\", \"\"),\n      date        = lubridate::ym(paste(year, month_clean)),\n      revision    = final - original\n    ) |>\n    select(date, original, final, revision) |>\n    filter(!is.na(date))\n}\n\n# Build full revisions data set for 1979–2025\nyears_full <- 1979:2025\n\nces_revisions_raw <- years_full |>\n  map(get_ces_revisions_year) |>\n  list_rbind() |>\n  arrange(date)\n\nces_revisions <- ces_revisions_raw |>\n  filter(date >= as.Date(\"1979-01-01\"),\n         date <= as.Date(\"2025-06-01\")) |>\n  arrange(date)\n\n# quick check\nhead(ces_revisions)\ntail(ces_revisions)\n\n```\n\n```{r}\ndatatable(\n  ces_revisions,\n  rownames = FALSE,\n  options = list(\n    pageLength = 12,\n    autoWidth = TRUE,\n    dom = \"tip\",\n    columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n  )\n) |>\n  formatStyle(\n    columns = names(ces_revisions),\n    `text-align` = \"center\"\n  ) |>\n  htmlwidgets::prependContent(\n    htmltools::tags$h3(\n      \"CES Nonfarm Payroll Revisions (Original vs Final, 1979–2025)\",\n      style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n    )\n  )\n\n\n```\n# Joined table\n```{r}\nlibrary(dplyr)\nlibrary(lubridate)\nlibrary(DT)\n\n# Build joined CES table for Task 3\nces_full <- ces_final |>\n  inner_join(ces_revisions, by = \"date\") |>\n  mutate(\n    year  = year(date),\n    month = month(date, label = TRUE, abbr = TRUE),\n    decade = (year %/% 10) * 10,\n    absolute_revision = abs(revision),\n    revision_pct = revision / final,\n    absolute_revision_pct = abs(revision) / final\n  ) |>\n  arrange(date)\n\n# Prepare display table \nces_full_display <- ces_full |>\n  arrange(date) |>\n  mutate(\n    Level               = round(level, 3),\n    Original            = round(original, 3),\n    Final               = round(final, 3),\n    Revision            = round(revision, 3),\n    AbsoluteRevision    = round(absolute_revision, 3),\n    AbsoluteRevisionPct = round(absolute_revision_pct, 3)\n  ) |>\n  select(\n    Date                 = date,\n    Level,\n    Original,\n    Final,\n    Revision,\n    AbsoluteRevision,\n    AbsoluteRevisionPct\n  )\n\n# Interactive table\ndatatable(\n  ces_full_display,\n  rownames = FALSE,\n  options = list(\n    pageLength = 10,\n    autoWidth  = TRUE,\n    dom        = \"tip\",\n    columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n  )\n) |>\n  formatStyle(\n    columns = names(ces_full_display),\n    `text-align` = \"center\"\n  ) |>\n  htmlwidgets::prependContent(\n    htmltools::tags$h3(\n      \"CES Levels and Revisions (Joined Table, 1979–2025)\",\n      style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n    )\n  )\n\n\n```\n\n# Data Exploration\n\n```{r, echo=FALSE, results=\"asis\"}\n\n\nlibrary(dplyr)\nlibrary(lubridate)\nlibrary(DT)\nlibrary(scales)\n\n# Clean joined CES table for analysis\nces_full_clean <- ces_full |>\n  filter(level > 0) |>\n  mutate(\n    absolute_revision = abs(revision),\n    revision_pct = revision / level,\n    absolute_revision_pct = abs(revision) / level\n  )\n\nstart_year <- year(min(ces_full_clean$date, na.rm = TRUE))\nend_year   <- year(max(ces_full_clean$date, na.rm = TRUE))\n\n# Stat 1: largest positive revision\nlargest_positive_revision <- ces_full_clean |>\n  slice_max(revision, n = 5)\n\nlargest_positive_display <- largest_positive_revision |>\n  mutate(\n    Level = round(level, 3),\n    Original = round(original, 3),\n    Final = round(final, 3),\n    Revision = round(revision, 3),\n    AbsoluteRevision = round(absolute_revision, 3),\n    AbsoluteRevisionPct = round(absolute_revision_pct, 5)\n  ) |>\n  select(\n    Date = date,\n    Level,\n    Original,\n    Final,\n    Revision,\n    AbsoluteRevision,\n    AbsoluteRevisionPct\n  )\n\ndatatable(\n  largest_positive_display,\n  rownames = FALSE,\n  options = list(\n    pageLength = 5,\n    autoWidth = TRUE,\n    dom = \"tip\",\n    columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n  )\n) |>\n  formatStyle(\n    columns = names(largest_positive_display),\n    `text-align` = \"center\"\n  ) |>\n  htmlwidgets::prependContent(\n    htmltools::tags$h3(\n      sprintf(\"Stat 1: Largest Positive CES Revision (%d–%d)\", start_year, end_year),\n      style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n    )\n  )\n\n# Stat 2: largest negative revision\nlargest_negative_revision <- ces_full_clean |>\n  slice_min(revision, n = 5)\n\nlargest_negative_display <- largest_negative_revision |>\n  mutate(\n    Level = round(level, 3),\n    Original = round(original, 3),\n    Final = round(final, 3),\n    Revision = round(revision, 3),\n    AbsoluteRevision = round(absolute_revision, 3),\n    AbsoluteRevisionPct = round(absolute_revision_pct, 5)\n  ) |>\n  select(\n    Date = date,\n    Level,\n    Original,\n    Final,\n    Revision,\n    AbsoluteRevision,\n    AbsoluteRevisionPct\n  )\n\ndatatable(\n  largest_negative_display,\n  rownames = FALSE,\n  options = list(\n    pageLength = 5,\n    autoWidth = TRUE,\n    dom = \"tip\",\n    columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n  )\n) |>\n  formatStyle(\n    columns = names(largest_negative_display),\n    `text-align` = \"center\"\n  ) |>\n  htmlwidgets::prependContent(\n    htmltools::tags$h3(\n      sprintf(\"Stat 2: Largest Negative CES Revision (%d–%d)\", start_year, end_year),\n      style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n    )\n  )\n\n# Stats 3–6: summary statistics in one table\navg_revision <- ces_full_clean |>\n  summarise(mean_revision = mean(revision, na.rm = TRUE)) |>\n  pull(mean_revision)\n\navg_absolute_revision <- ces_full_clean |>\n  summarise(mean_abs_revision = mean(absolute_revision, na.rm = TRUE)) |>\n  pull(mean_abs_revision)\n\navg_absolute_revision_pct <- ces_full_clean |>\n  summarise(mean_abs_revision_pct = mean(absolute_revision_pct, na.rm = TRUE)) |>\n  pull(mean_abs_revision_pct)\n\nfraction_positive_overall <- ces_full_clean |>\n  summarise(fraction_positive = mean(revision > 0, na.rm = TRUE)) |>\n  pull(fraction_positive)\n\nstats_3_6_table <- tibble(\n  Statistic = c(\n    \"Average revision (thousand jobs)\",\n    \"Average absolute revision (thousand jobs)\",\n    \"Average absolute revision as percent of employment\",\n    \"Fraction of months with positive revisions\"\n  ),\n  Value = c(\n    round(avg_revision, 3),\n    round(avg_absolute_revision, 3),\n    percent(avg_absolute_revision_pct, accuracy = 0.01),\n    percent(fraction_positive_overall, accuracy = 0.1)\n  )\n)\n\ndatatable(\n  stats_3_6_table,\n  rownames = FALSE,\n  options = list(\n    pageLength = 4,\n    autoWidth = TRUE,\n    dom = \"tip\",\n    columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n  )\n) |>\n  formatStyle(\n    columns = names(stats_3_6_table),\n    `text-align` = \"center\"\n  ) |>\n  htmlwidgets::prependContent(\n    htmltools::tags$h3(\n      sprintf(\"Stats 3–6: Overall CES Revision Summary (%d–%d)\", start_year, end_year),\n      style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n    )\n  )\n\n# New stat: average revision by calendar month across all years\nmonthly_revision_table <- ces_full_clean |>\n  mutate(\n    month_num = month(date),\n    month_name = month(date, label = TRUE, abbr = TRUE)\n  ) |>\n  group_by(month_num, month_name) |>\n  summarise(\n    AverageRevision = mean(revision, na.rm = TRUE),\n    AverageAbsoluteRevision = mean(absolute_revision, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |>\n  arrange(month_num) |>\n  transmute(\n    Month = as.character(month_name),\n    AverageRevision = round(AverageRevision, 3),\n    AverageAbsoluteRevision = round(AverageAbsoluteRevision, 3)\n  )\n\ndatatable(\n  monthly_revision_table,\n  rownames = FALSE,\n  options = list(\n    pageLength = 12,\n    autoWidth = TRUE,\n    dom = \"tip\",\n    columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n  )\n) |>\n  formatStyle(\n    columns = names(monthly_revision_table),\n    `text-align` = \"center\"\n  ) |>\n  htmlwidgets::prependContent(\n    htmltools::tags$h3(\n      \"Stat 7: Average CES Revision by Calendar Month \",\n      style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n    )\n  )\n\n```\n 4 visualizations\n```{r}\n\nlibrary(ggplot2)\nlibrary(scales)\nlibrary(dplyr)\n\n\n# Plot 1: CES employment level over time\nggplot(ces_full, aes(x = date, y = level)) +\n  geom_line() +\n  labs(\n    title = \"CES Total Nonfarm Payroll Employment Level (1979–2025)\",\n    x = \"Year\",\n    y = \"Employment Level (thousands of jobs)\"\n  ) +\n  scale_y_continuous(labels = comma) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    axis.title = element_text()\n  )\n\n# Plot 2: CES revisions over time by magnitude\nggplot(ces_full, aes(x = date, y = revision)) +\n  geom_line() +\n  geom_hline(yintercept = 0, linewidth = 0.4) +\n  labs(\n    title = \"CES Revisions Over Time (Final minus Original, 1979–2025)\",\n    x = \"Year\",\n    y = \"Revision in Employment Level (thousands of jobs)\"\n  ) +\n  scale_y_continuous(labels = comma) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    axis.title = element_text()\n  )\n\n# Plot 3: average positive and negative CES revisions over time (absolute value)\nrev_pos_neg_year <- ces_full |>\n  mutate(\n    rev_type = if_else(revision >= 0, \"Positive Revision\", \"Negative Revision\"),\n    abs_rev = abs(revision)\n  ) |>\n  group_by(year, rev_type) |>\n  summarise(\n    avg_abs_revision = mean(abs_rev, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\nggplot(rev_pos_neg_year, aes(x = year, y = avg_abs_revision, fill = rev_type)) +\n  geom_col(position = \"dodge\") +\n  geom_smooth(\n    aes(color = rev_type),\n    method = \"loess\",\n    se = FALSE,\n    linewidth = 1.2\n  ) +\n  labs(\n    title = \"Average Positive and Negative CES Revisions by Year\",\n    x = \"Year\",\n    y = \"Average Absolute Revision (thousands of jobs)\",\n    fill = \"Revision Type\",\n    color = \"Trend\"\n  ) +\n  scale_y_continuous(labels = comma) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    axis.text.x = element_text(angle = 90, vjust = 0.5)\n  )\n\n# Plot 4: Absolute revision percentage over time using cleaned data\nggplot(ces_full_clean, aes(x = date, y = absolute_revision_pct)) +\n  geom_line() +\n  labs(\n    title = \"CES Revision as a Percentage of Overall Employment\",\n    x = \"Year\",\n    y = \"Absolute Revision as Percent of Employment\"\n  ) +\n  scale_y_continuous(labels = percent_format(accuracy = 0.01)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    axis.title = element_text()\n  )\n\n```\n# Statistical Analysis\n\n###### A t test is a common tool used in hypothesis testing. Hypothesis testing is a  way to decide whether a pattern we see in data is large enough to conclude that some underlying effect is happening, rather than just the result of randomness. For CES revisions, the question is whether the average revision significantly differs from zero. If CES estimates are unbiased, then the initial and final numbers should, on average, be the same.\n###### To answer this, we set up two competing hypotheses:\n\n###### -  Null hypothesis (H₀): The true average CES revision is 0.\n######  -  Alternative hypothesis (H₁): The true average CES revision is not 0.\n  \n###### The t test evaluates how far the observed sample mean revision is from zero, relative to the amount of natural month 2to month variation in revisions. Even if the true average were exactly zero, revisions would still jump around randomly each month, so a small nonzero mean could occur by chance. The t test asks: Is the observed mean bigger than what chance alone would likely produce?\n###### The main output of the test is the p-value, which tells us how likely it is to observe a sample mean at least this extreme if the true mean were actually zero. In most statistical work, a p-value below 0.05 is considered strong enough to reject the null hypothesis. A p-value below 0.01 is even stronger evidence. When the p-value becomes extremely small, it indicates the observed pattern would be extraordinarily unlikely if the true mean were zero.\n###### The t test also produces a 95% confidence interval, which gives a range of values that are plausible for the true average revision based on the data. If this interval does not include zero, it supports the conclusion that the true mean revision is meaningfully different from zero.\n###### Together, the t test, its p-value, and the confidence interval provide a clear framework for determining whether CES revisions tend to be biased upward or downward, rather than centered around zero.\n\n```{r}\n\n# Task 4: Statistical Inference (t_test and prop_test)\n\n\nlibrary(infer)\nlibrary(dplyr)\nlibrary(lubridate)\nlibrary(glue)\nlibrary(scales)\nlibrary(DT)\nlibrary(tools)\n\n\n# UNIVERSAL COLUMN NAME CLEANER \nclean_colnames <- function(df) {\n  nn <- names(df)\n  nn <- gsub(\"_\", \" \", nn)\n  nn <- trimws(nn)\n  nn <- toTitleCase(nn)\n\n  # uppercase acronyms\n  acronyms <- c(\"Ci\", \"Df\", \"Id\", \"Na\", \"P\", \"T\", \"R\")\n  for (ac in acronyms) {\n    nn <- gsub(paste0(\"\\\\b\", ac, \"\\\\b\"), toupper(ac), nn)\n  }\n\n  names(df) <- nn\n  df\n}\n\n\n\nmake_dt <- function(df, title, pageLength = 10) {\n  df2 <- clean_colnames(df)\n\n  dt <- datatable(\n    df2,\n    rownames = FALSE,\n    options = list(\n      pageLength = pageLength,\n      autoWidth  = TRUE,\n      dom        = \"tip\",\n      columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n    )\n  ) |>\n    formatStyle(\n      columns = names(df2),\n      `text-align` = \"center\"\n    ) |>\n    htmlwidgets::prependContent(\n      htmltools::tags$h3(\n        title,\n        style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n      )\n    )\n\n  dt\n}\n\n# Make sure data exists\nces_full_clean_ok <- ces_full_clean |> filter(!is.na(revision))\n```\n\n\n```{r}\n\n# TEST 1: Is the mean revision different from 0?\n\ntest1_result <- t_test(\n  ces_full_clean_ok,\n  response = revision,\n  mu = 0\n)\n\nt1_estimate <- test1_result |> pull(estimate)\nt1_pvalue   <- test1_result |> pull(p_value)\nt1_lower    <- test1_result |> pull(lower_ci)\nt1_upper    <- test1_result |> pull(upper_ci)\n\ntest1_display <- test1_result |>\n  transmute(\n    Estimate = round(estimate, 2),\n    T_Df     = round(t_df, 1),\n    P_Value  = signif(p_value, 3),\n    Lower_CI = round(lower_ci, 2),\n    Upper_CI = round(upper_ci, 2)\n  )\n\nmake_dt(\n  test1_display,\n  title = \"Test 1: Is the Average CES Revision Different From Zero?\",\n  pageLength = 5\n)\n\nstart_year <- year(min(ces_full_clean_ok$date))\nend_year   <- year(max(ces_full_clean_ok$date))\n\ncat(\n  glue(\n    \n    \"A t-test gives p = {signif(t1_pvalue, 3)} with a 95% CI of \",\n    \"{comma(round(t1_lower, 1))} to {comma(round(t1_upper, 1))} thousand.\\n\\n\"\n  )\n)\n\n\n```\n\n##### From 1979 to 2025, the average CES revision was 12 thousand jobs, meaning that the final published estimate was typically higher than the initial release. A t-test comparing the mean revision to zero yields a p-value of 0.00118, and the 95% confidence interval for the true mean revision ranges from 5 to 18 thousand jobs. This means there is statistically significant evidence that revisions are not centered at zero. Essentially, the average revision is small relative to total U.S. employment, but large enough that it can influence short-run interpretations of monthly job reports.\n\n```{r echo=FALSE, results='asis'}\n\n# TEST 2 — Did negative revision frequency change after 2000?\n\nces_full_clean_period <- ces_full_clean_ok |>\n  mutate(\n    period_post2000 = if_else(year(date) >= 2000, \"Post2000\", \"Pre2000\"),\n    neg_numeric     = if_else(revision < 0, 1, 0)   # \n  ) |>\n  filter(!is.na(neg_numeric))\n\n# Fractions for interpretation\nneg_frac_by_period <- ces_full_clean_period |>\n  group_by(period_post2000) |>\n  summarise(\n    Months = n(),\n    FractionNegative = mean(neg_numeric),\n    .groups = \"drop\"\n  )\n\npre_frac <- neg_frac_by_period |>\n  filter(period_post2000 == \"Pre2000\") |>\n  pull(FractionNegative)\n\npost_frac <- neg_frac_by_period |>\n  filter(period_post2000 == \"Post2000\") |>\n  pull(FractionNegative)\n\n# infer t_test \ntest2_result <- t_test(\n  ces_full_clean_period,\n  neg_numeric ~ period_post2000,\n  order = c(\"Pre2000\", \"Post2000\")\n)\n\nt2_estimate <- pull(test2_result, estimate)\nt2_pvalue   <- pull(test2_result, p_value)\nt2_lower    <- pull(test2_result, lower_ci)\nt2_upper    <- pull(test2_result, upper_ci)\n\ntest2_display <- tibble(\n  DifferenceInFractions = round(t2_estimate, 3),\n  T_Df                  = round(test2_result$t_df, 1),\n  P_Value               = signif(t2_pvalue, 3),\n  Lower_CI              = round(t2_lower, 3),\n  Upper_CI              = round(t2_upper, 3)\n)\n\nmake_dt(\n  test2_display,\n  title = \"Test 2: Did Negative Revision Frequency Change After 2000?\",\n  pageLength = 5\n)\n\n\n\n```\n\n\n\n##### Before 2000, 40.5% of CES revisions were negative, compared to 44.1% after 2000.\n##### The estimated difference (Post − Pre) is −0.036, meaning that negative revisions were slightly more common after 2000, but only by about 3.6 percentage points.\n\n##### A t-test gives:\n  -  Difference in fractions: −0.036\n  -  95% confidence interval: −0.119 to 0.046\n  -  p-value: 0.387\n  -  Degrees of freedom: 537.8\n  \n##### This confidence interval includes both negative and positive values, indicating substantial uncertainty about the true change. The p-value of 0.387 is far above conventional significance levels (such as 0.05), showing that the observed difference is well within the range of natural random variation.\n\n##### There is no evidence that the frequency of negative revisions changed significantly after the year 2000. The rate of negative revisions appears largely stable over time, with no indication of a structural shift.\n\n# BLS Fact Check\n\n\n##  Does the Data Support the White House’s Claim?\n\nThe Trump administration’s public justification for firing the Bureau of Labor Statistics Commissioner Erika McEntarfer makes a bold claim. As the White House put it, the BLS under her leadership has shown “a lengthy history of inaccuracies and incompetence”, and published “overly optimistic jobs numbers - only for those numbers to be quietly revised later.”\n\nTrump argues that Commissioner McEntarfer repeatedly published inflated preliminary job numbers during the Biden administration, making the economy appear stronger than it was. He further claims that she continued this pattern after he took office, now suggesting that overly optimistic job reports would discourage the Federal Reserve from cutting interest rates, a policy he publicly supports.\n\nThe White House claim suggests two things about the period under McEntarfer which started February 2024:\n\n  - Large revisions are more common than in earlier decades.\n  - Negative revisions are also more common, implying that initial job estimates were systematically overstated.\n\nTo evaluate whether the data supports this narrative, we perform two statistical comparisons between the McEntarfer era (Feb 2024–Jun 2025) and the historical period (1979–Jan 2024):\n\n**Test A: Is the share of substantial revisions (revisions greater than 50,000 jobs) significantly higher under McEntarfer?**\n\n**Test B: Is the share of negative revisions significantly higher under McEntarfer?**\n\nIf either proportion shows a statistically significant increase, then the data would give empirical support to the White House’s claim. \n\nIf both changes are statistically insignificant, the historical revision record does not support the rationale for the dismissal.\n\n\n#### **Test A: Is the share of substantial revisions more common under McEntarfer? **\n\n```{r}\n# Test A: Is the share of substantial revisions more common under McEntarfer?\n\nlibrary(dplyr)\nlibrary(lubridate)\nlibrary(infer)\n\n# Define eras and a \"substantial revision\" indicator \nces_fc1 <- ces_full_clean |>\n  mutate(\n    era = if_else(\n      date >= as.Date(\"2024-02-01\") & date <= as.Date(\"2025-06-01\"),\n      \"McEntarfer\",\n      \"Earlier\"\n    ),\n    substantial = as.integer(abs(revision) > 50)\n  )\n\n# Summary table (rounded to 3 decimals)\nfc1a_summary <- ces_fc1 |>\n  group_by(era) |>\n  summarise(\n    Months              = n(),\n    FractionSubstantial = round(mean(substantial, na.rm = TRUE), 3),\n    .groups = \"drop\"\n  )\n\nmake_dt(\n  fc1a_summary,\n  title = \"Fraction of Substantial Revisions (>|50,000| Jobs), Earlier vs McEntarfer\",\n  pageLength = 5\n)\n\n# Two-sample Welch t-test \nfc1a_test <- t_test(\n  ces_fc1,\n  substantial ~ era,\n  order = c(\"Earlier\", \"McEntarfer\")\n)\n\n# Display table rounded to 3 decimals\nfc1a_display <- fc1a_test |>\n  transmute(\n    Difference = round(estimate, 3),\n    T_Df       = round(t_df, 3),\n    P_Value    = signif(p_value, 3),\n    Lower_CI   = round(lower_ci, 3),\n    Upper_CI   = round(upper_ci, 3)\n  )\n\nmake_dt(\n  fc1a_display,\n  title = \"Test A: Are Substantial Revisions More Common in the McEntarfer Era?\",\n  pageLength = 5\n)\n\n# Save values for inline use\nfc1a_diff  <- round(as.numeric(fc1a_test$estimate), 3)\nfc1a_p     <- signif(as.numeric(fc1a_test$p_value), 3)\nfc1a_lower <- round(as.numeric(fc1a_test$lower_ci), 3)\nfc1a_upper <- round(as.numeric(fc1a_test$upper_ci), 3)\n\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(lubridate)\nlibrary(scales)\n\n# Build dataset for substantial revisions only\nsubstantial_yearly <- ces_full_clean |>\n  mutate(\n    year = year(date),\n    substantial = abs(revision) > 50,                # 50 = 50,000 jobs\n    era = if_else(\n      date < as.Date(\"2024-02-01\"),\n      \"Earlier\",\n      \"McEntarfer\"\n    )\n  ) |>\n  filter(substantial) |>                              # keep only substantial revisions\n  group_by(year, era) |>\n  summarise(\n    Count = n(),\n    .groups = \"drop\"\n  )\n\nggplot(substantial_yearly, aes(x = year, y = Count, fill = era)) +\n  geom_col() +\n  scale_fill_manual(\n    values = c(\n      \"Earlier\"     = \"#C92A2A\",  # red\n      \"McEntarfer\"  = \"#1971C2\"   # blue\n    )\n  ) +\n  labs(\n    title = \"Number of Substantial CES Revisions per Year\",\n    subtitle = \"Substantial revisions defined as |revision| > 50,000 jobs\",\n    x = \"Year\",\n    y = \"Count of Substantial Revisions\",\n    fill = \"Era\"\n  ) +\n  scale_x_continuous(breaks = seq(1980, 2025, 5)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title    = element_text(face = \"bold\"),\n    plot.subtitle = element_text(),\n    axis.text.x   = element_text(angle = 90, vjust = 0.5)\n  )\n\n```\n\nTo evaluate whether substantial revisions were more common under Commissioner McEntarfer, we tested the hypotheses:\n\nH₀: The proportion of substantial revisions is the same in the McEntarfer era and the earlier period.\n\nH₁: The proportion of substantial revisions is different between the two periods.\n\nThe estimated difference in proportions (McEntarfer minus Earlier) was −0.058, meaning the McEntarfer era actually had a slightly lower share of substantial revisions. The 95% confidence interval ranged from −0.326 to 0.209, which includes zero. This indicates that the true difference could reasonably be negative, zero, or positive.\n\nThe p-value for this test was 0.65, which is far greater than the conventional 0.05 threshold. Because the p-value is so large, we fail to reject the null hypothesis. In practical terms, there is no statistical evidence that substantial revisions became more common under McEntarfer. The small observed difference is well within the level of variation that would be expected by random chance.\n\nAdditionally, the short tenure of McEntarfer lends to a very small sample size to test on for that era. \n\n\n\n#### **Test B: Are negative revisions more common under McEntarfer? **\n\n```{r}\n\n# Test B: Are negative revisions more common under McEntarfer?\n\n\nces_fc2 <- ces_full_clean |>\n  mutate(\n    era = if_else(\n      date >= as.Date(\"2024-02-01\") & date <= as.Date(\"2025-06-01\"),\n      \"McEntarfer\",\n      \"Earlier\"\n    ),\n    negative_rev = as.integer(revision < 0)\n  )\n\n# Summary table (rounded to 3 decimals)\nfc2b_summary <- ces_fc2 |>\n  group_by(era) |>\n  summarise(\n    Months           = n(),\n    FractionNegative = round(mean(negative_rev, na.rm = TRUE), 3),\n    .groups = \"drop\"\n  )\n\nmake_dt(\n  fc2b_summary,\n  title = \"Fraction of Negative Revisions, Earlier vs McEntarfer\",\n  pageLength = 5\n)\n\n# Welch t-test on the 0/1 indicator\nfc2b_test <- t_test(\n  ces_fc2,\n  negative_rev ~ era,\n  order = c(\"Earlier\", \"McEntarfer\")\n)\n\n# Display table rounded to 3 decimals\nfc2b_display <- fc2b_test |>\n  transmute(\n    Difference = round(estimate, 3),\n    T_Df       = round(t_df, 3),\n    P_Value    = signif(p_value, 3),\n    Lower_CI   = round(lower_ci, 3),\n    Upper_CI   = round(upper_ci, 3)\n  )\n\nmake_dt(\n  fc2b_display,\n  title = \"Test B: Are Negative Revisions More Common in the McEntarfer Era?\",\n  pageLength = 5\n)\n\n# Save values for inline use\nfc2b_diff  <- round(as.numeric(fc2b_test$estimate), 3)\nfc2b_p     <- signif(as.numeric(fc2b_test$p_value), 3)\nfc2b_lower <- round(as.numeric(fc2b_test$lower_ci), 3)\nfc2b_upper <- round(as.numeric(fc2b_test$upper_ci), 3)\n\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(scales)\nlibrary(lubridate)\n\n# Add an era variable for coloring\nces_rev_era <- ces_full |>\n  mutate(\n    era = if_else(\n      date < as.Date(\"2024-02-01\"),\n      \"Earlier\",\n      \"McEntarfer\"\n    )\n  )\n\nggplot(ces_rev_era, aes(x = date, y = revision, color = era)) +\n  geom_line() +\n  geom_hline(yintercept = 0, linewidth = 0.4) +\n  scale_color_manual(\n    values = c(\n      \"Earlier\"     = \"#C92A2A\",  # red\n      \"McEntarfer\"  = \"#1971C2\"   # blue\n    )\n  ) +\n  labs(\n    title = \"CES Revisions Over Time (Earlier vs McEntarfer Period)\",\n    subtitle = \"Revisions shown as final minus original estimates\",\n    x = \"Year\",\n    y = \"Revision in Employment Level (thousands of jobs)\",\n    color = \"Era\"\n  ) +\n  scale_y_continuous(labels = comma) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title    = element_text(face = \"bold\"),\n    plot.subtitle = element_text(),\n    axis.title    = element_text()\n  )\n\n```\nTo evaluate whether negative revisions were more common under Commissioner McEntarfer, we tested the hypotheses:\n\nH₀: The proportion of negative revisions is the same in the McEntarfer era and the earlier period.\n\nH₁: The proportions differ between the two periods.\n\nThe earlier period had a negative revision rate of 0.418, compared with 0.647 under McEntarfer, a raw increase of about 23 percentage points. The estimated difference in proportions (McEntarfer minus Earlier) was –0.229, and the 95% confidence interval ranged from –0.485 to 0.027. Because this interval includes zero, the data do not rule out the possibility that the true difference is actually zero or even slightly positive.\n\nThe p-value for the test was 0.0759, which is above 0.05. Since the p-value is not small enough to reject the null hypothesis, we conclude that there is not sufficient statistical evidence that negative revisions became more common under McEntarfer. Although the observed difference is large in magnitude, the limited number of months in the McEntarfer period (n = 17) means the estimate is imprecise, and the result is not statistically significant at the 5% level.\n\nCitation:\nWhite House. “BLS Has Lengthy History of Inaccuracies, Incompetence.” whitehouse.gov, August 1, 2025. https://www.whitehouse.gov/articles/2025/08/bls-has-lengthy-history-of-inaccuracies-incompetence/\n\n\n\n## **Does the Data Support the Claim That the BLS Favors Democratic Administrations?** \n\nBeyond the debate over Commissioner McEntarfer’s dismissal, some (fictional) political commentators have argued that the Bureau of Labor Statistics tends to produce stronger employment numbers when a Democrat is in the White House. \n\nThe claim suggests that the CES estimates are somehow influenced by partisan considerations, leading to higher published job numbers and stronger perceived employment growth during Democratic administrations.\n\nAs one commentator put it, the BLS “always seems to report better job numbers for Democrats than Republicans” implying that the agency systematically favors one party over the other. \n\nThis claim implies two measurable expectations about the historical jobs data:\n\n  - Employment levels should be higher under Democratic presidents because the BLS allegedly portrays stronger economic performance during Democratic administrations.\n  - Revisions under democratic administrations should be more often negative. \n  \n  \nTo evaluate whether the data support this narrative, we compare the full CES record from 1979 to 2025 across presidential administrations, classifying each month according to the president’s political party. This allows us to test whether differences in employment levels and job growth between Democratic and Republican presidencies are statistically meaningful or simply reflect long term economic trends such as population growth and business cycles.\nWe perform two statistical comparisons between Democrat led months and Republican led months:\n\n**Test C: Are CES employment levels significantly higher during Democratic presidencies?**\n\n**Test D: Are monthly CES revisions more often negative during Democratic presidencies?**\n\nIf either test reveals statistically significant differences, that would provide empirical support for the claim that CES employment reporting favors Democratic administrations. If both differences are statistically insignificant, the historical data would not support the allegation that the BLS is biased to either party.\n\nIf either test reveals statistically significant differences, that would provide empirical support for the claim that CES employment reporting favors Democratic administrations. If both differences are statistically insignificant, the historical data would not support the allegation that the BLS is biased to either party.\n\n\n### **Test C: Are CES employment levels significantly higher during Democratic presidencies?**\n\n```{r}\nlibrary(dplyr)\nlibrary(lubridate)\nlibrary(tidyr)\nlibrary(infer)\nlibrary(ggplot2)\nlibrary(scales)\n\n# 1. Presidential party lookup table (1979–2025)\npresidents_party <- expand_grid(\n  year = 1979:2025,\n  month = month.name,\n  president = NA_character_,\n  party = NA_character_\n) |>\n  mutate(\n    president = case_when(\n      (month == \"January\")  & (year == 1979) ~ \"Carter\",\n      (month == \"February\") & (year == 1981) ~ \"Reagan\",\n      (month == \"February\") & (year == 1989) ~ \"Bush 41\",\n      (month == \"February\") & (year == 1993) ~ \"Clinton\",\n      (month == \"February\") & (year == 2001) ~ \"Bush 43\",\n      (month == \"February\") & (year == 2009) ~ \"Obama\",\n      (month == \"February\") & (year == 2017) ~ \"Trump I\",\n      (month == \"February\") & (year == 2021) ~ \"Biden\",\n      (month == \"February\") & (year == 2025) ~ \"Trump II\",\n      TRUE ~ NA_character_\n    )\n  ) |>\n  tidyr::fill(president) |>\n  mutate(\n    party = if_else(\n      president %in% c(\"Carter\", \"Clinton\", \"Obama\", \"Biden\"),\n      \"D\",\n      \"R\"\n    ),\n    month_num = match(month, month.name)\n  )\n\n# 2. Join CES levels to presidents/parties and build pct_change\n\n\nces_party <- ces_full |>\n  mutate(\n    year = year(date),\n    month_num = month(date)\n  ) |>\n  left_join(\n    presidents_party |>\n      select(year, month_num, president, party),\n    by = c(\"year\", \"month_num\")\n  ) |>\n  filter(!is.na(party)) |>\n  arrange(date) |>\n  mutate(\n    change = level - lag(level),\n    pct_change = change / lag(level)\n  ) |>\n  filter(!is.na(change), !is.na(pct_change))\n\n# 3. Test C: Are monthly percent job gains higher under Democratic presidents?\n\n# Summary table by party (normalized percent changes)\nparty_pct_summary <- ces_party |>\n  group_by(party) |>\n  summarise(\n    Months          = n(),\n    MeanPctChange   = round(mean(pct_change, na.rm = TRUE), 3),\n    MedianPctChange = round(median(pct_change, na.rm = TRUE), 3),\n    SDPCT           = round(sd(pct_change, na.rm = TRUE), 3),\n    .groups = \"drop\"\n  ) |>\n  mutate(\n    PartyLabel = if_else(party == \"D\", \"Democrat\", \"Republican\")\n  ) |>\n  select(\n    Party = PartyLabel,\n    Months,\n    MeanPctChange,\n    MedianPctChange,\n    SDPCT\n  )\n\nmake_dt(\n  party_pct_summary,\n  title = \"Monthly Percent Employment Growth by Presidential Party (1979–2025)\",\n  pageLength = 5\n)\n\n# Welch t-test on normalized percent changes\nparty_pct_test <- t_test(\n  ces_party,\n  pct_change ~ party,\n  order = c(\"R\", \"D\"),    # estimate = Democrat minus Republican\n  alternative = \"greater\" # test if Democrats > Republicans\n)\n\nparty_pct_display <- party_pct_test |>\n  transmute(\n    Difference = round(estimate, 3),\n    T_Df       = round(t_df, 3),\n    P_Value    = signif(p_value, 3),\n    Lower_CI   = round(lower_ci, 3),\n    Upper_CI   = round(upper_ci, 3)\n  )\n\nmake_dt(\n  party_pct_display,\n  title = \"Test C: Are Monthly Percent Job Gains Higher Under Democratic Presidents?\",\n  pageLength = 5\n)\n\n\npct_diff  <- round(as.numeric(party_pct_test$estimate), 3)\npct_p     <- signif(as.numeric(party_pct_test$p_value), 3)\npct_lower <- round(as.numeric(party_pct_test$lower_ci), 3)\npct_upper <- round(as.numeric(party_pct_test$upper_ci), 3)\n\n# 4. Visual 1: CES employment levels over time colored by party\nggplot(ces_party, aes(x = date, y = level, color = party)) +\n  geom_line() +\n  scale_color_manual(\n    values = c(\"D\" = \"#1F77B4\", \"R\" = \"#D62728\"),\n    labels = c(\"D\" = \"Democrat\", \"R\" = \"Republican\")\n  ) +\n  labs(\n    title = \"CES Employment Levels by Presidential Party\",\n    x = \"Year\",\n    y = \"Employment Level (thousands of jobs)\",\n    color = \"Party\"\n  ) +\n  scale_y_continuous(labels = comma) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    axis.title = element_text()\n  )\n\n# 5. Visual 2: Average monthly percent change by president \npresident_change_summary <- ces_party |>\n  group_by(president, party) |>\n  summarise(\n    MeanPctChange = mean(pct_change, na.rm = TRUE),\n    Months = n(),\n    .groups = \"drop\"\n  ) |>\n  mutate(\n    President = factor(\n      president,\n      levels = c(\"Carter\", \"Reagan\", \"Bush 41\", \"Clinton\",\n                 \"Bush 43\", \"Obama\", \"Trump I\", \"Biden\", \"Trump II\")\n    )\n  )\n\nggplot(president_change_summary,\n       aes(x = President, y = MeanPctChange, fill = party)) +\n  geom_col() +\n  scale_fill_manual(\n    values = c(\"D\" = \"#1F77B4\", \"R\" = \"#D62728\"),\n    labels = c(\"D\" = \"Democrat\", \"R\" = \"Republican\")\n  ) +\n  labs(\n    title = \"Average Monthly Percent Job Growth by President\",\n    x = \"President\",\n    y = \"Average Monthly Percent Change\",\n    fill = \"Party\"\n  ) +\n  scale_y_continuous(labels = percent_format(accuracy = 0.01)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    axis.text.x = element_text(angle = 45, hjust = 1)\n  )\n\n```\n\nTest C: Are Monthly Percent Job Gains Higher Under Democratic Presidents?\nTo evaluate the claim that the Bureau of Labor Statistics tends to report stronger job growth under Democratic administrations, we compared the monthly percent change in total nonfarm payroll employment across presidential parties from 1979 to 2025.\n\nThe hypotheses for this test were:\n\nH₀: The mean monthly percent job growth is the same under Democratic and Republican presidents.\n\nH₁: The mean monthly percent job growth is higher under Democratic presidents.\n\n\nAcross the full sample, Democratic presidents oversaw 264 months of data with an average monthly percent gain of 0.002, while Republican presidents oversaw 293 months with an average gain of 0.001. The median growth rate was also slightly higher for Democrats (0.002 versus 0.001). However, Republicans had much larger variability in their monthly changes, with a standard deviation of 0.009, compared with 0.002 for Democrats.\n\nA Welch t-test comparing the distributions found an estimated difference of –0.001 (Democrat minus Republican), with a 95% confidence interval ranging from –0.002 to approximately 0.000. The p-value was 0.956, which is far above the conventional significance threshold of 0.05.\n\nBecause the p-value is not small and the confidence interval includes zero, we fail to reject the null hypothesis. The data does not provide statistical evidence that monthly percent job growth is higher under Democratic presidents. The small observed difference in averages is well within the range that could be explained by normal  variation rather than a systematic pattern related to presidential party.\n\n### **Test D: Are monthly CES revisions more often negative during Democratic presidencies?**\n\n```{r}\n# Test D: Are monthly CES revisions more often negative during Democratic presidencies?\n\nlibrary(dplyr)\nlibrary(infer)\nlibrary(DT)\nlibrary(ggplot2)\nlibrary(scales)\n\n# ces_party is assumed to contain:\n#   date, level, revision, president, party (\"D\" / \"R\")\n\n# 1. Add a 0/1 indicator for negative revisions\nces_party_neg <- ces_party |>\n  mutate(\n    negative = as.integer(revision < 0)   # 1 = negative revision, 0 = not\n  )\n\n# 2. Summary table: fraction of negative revisions by party (rounded to 3 decimals)\ntd_summary <- ces_party_neg |>\n  group_by(party) |>\n  summarise(\n    Months           = n(),\n    FractionNegative = round(mean(negative, na.rm = TRUE), 3),\n    .groups = \"drop\"\n  ) |>\n  mutate(\n    Party = if_else(party == \"D\", \"Democrat\", \"Republican\")\n  ) |>\n  select(\n    Party,\n    Months,\n    FractionNegative\n  )\n\nmake_dt(\n  td_summary,\n  title = \"Fraction of Negative CES Revisions by Presidential Party (1979–2025)\",\n  pageLength = 5\n)\n\n# 3. Test D: Are negative revisions more common under Democrats?\n#    H0: mean(negative) is the same for D and R\n#    H1: mean(negative) is higher for Democrats\n\ntd_test <- t_test(\n  ces_party_neg,\n  negative ~ party,\n  order = c(\"R\", \"D\"),       # estimate = Democrat minus Republican\n  alternative = \"greater\"    # test if Democrats have more negative revisions\n)\n\ntd_display <- td_test |>\n  transmute(\n    Difference = round(estimate, 3),\n    T_Df       = round(t_df, 3),\n    P_Value    = signif(p_value, 3),\n    Lower_CI   = round(lower_ci, 3),\n    Upper_CI   = round(upper_ci, 3)\n  )\n\nmake_dt(\n  td_display,\n  title = \"Test D: Are Negative Revisions More Common Under Democratic Presidents?\",\n  pageLength = 5\n)\n\n# Save key values for inline text in your write-up\ntd_diff  <- round(as.numeric(td_test$estimate), 3)\ntd_p     <- signif(as.numeric(td_test$p_value), 3)\ntd_lower <- round(as.numeric(td_test$lower_ci), 3)\ntd_upper <- round(as.numeric(td_test$upper_ci), 3)\n\n# 4. Visual 1: Fraction of negative revisions by president (red = R, blue = D)\n\ntd_pres <- ces_party_neg |>\n  group_by(president, party) |>\n  summarise(\n    Months           = n(),\n    FractionNegative = mean(negative, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |>\n  mutate(\n    President = factor(\n      president,\n      levels = c(\n        \"Carter\", \"Reagan\", \"Bush 41\", \"Clinton\",\n        \"Bush 43\", \"Obama\", \"Trump I\", \"Biden\", \"Trump II\"\n      )\n    )\n  )\n\nggplot(td_pres,\n       aes(x = President, y = FractionNegative, fill = party)) +\n  geom_col() +\n  scale_fill_manual(\n    values = c(\"D\" = \"#1F77B4\", \"R\" = \"#D62728\"),\n    labels = c(\"D\" = \"Democrat\", \"R\" = \"Republican\")\n  ) +\n  labs(\n    title = \"Share of Negative CES Revisions by President\",\n    x = \"President\",\n    y = \"Fraction of Negative Revisions\",\n    fill = \"Party\"\n  ) +\n  scale_y_continuous(labels = percent_format(accuracy = 1)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title  = element_text(face = \"bold\"),\n    axis.text.x = element_text(angle = 45, hjust = 1)\n  )\n\n# 5. Visual 2: Distribution of revisions by party (boxplot, red vs blue)\n\nggplot(ces_party_neg,\n       aes(x = party, y = revision, fill = party)) +\n  geom_boxplot(outlier.alpha = 0.2) +\n  scale_fill_manual(\n    values = c(\"D\" = \"#1F77B4\", \"R\" = \"#D62728\"),\n    labels = c(\"D\" = \"Democrat\", \"R\" = \"Republican\")\n  ) +\n  scale_x_discrete(\n    labels = c(\"D\" = \"Democrat\", \"R\" = \"Republican\")\n  ) +\n  labs(\n    title = \"Distribution of CES Revisions by Presidential Party\",\n    x = \"Party\",\n    y = \"Revision (thousands of jobs)\",\n    fill = \"Party\"\n  ) +\n  scale_y_continuous(labels = comma) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(face = \"bold\")\n  )\n\n```\n\nTest D: Are Negative CES Revisions More Common Under Democratic Presidents?\n\nTo evaluate the claim that the BLS produces more downward-corrected job numbers when Democrats are in office (meaning their initial bias is to publish higher job numbers during Democrat administrations) we tested whether negative revisions occur more frequently under Democratic presidents. \n\nThe hypotheses are:\n\nH₀: The proportion of negative CES revisions is the same under Democratic and Republican presidents.\n\nH₁: The proportion of negative revisions is higher under Democratic presidents.\n\nDuring the 1979–2025 period, 36 percent of CES revisions were negative during Democratic presidencies, compared with 48.1 percent during Republican presidencies. This already runs counter to the narrative: negative revisions were actually more common under Republicans.\n\nThe Welch t-test formalizes this comparison. The estimated difference in proportions (Democrat minus Republican) is: 0.121, meaning Republicans experienced a 12.1-percentage-point higher rate of negative revisions.\n\nThe 95 percent confidence interval ranges from 0.053 to for now, 1, indicating that the true difference is very likely positive. The p-value is 0.00184, which is far below the 0.05 significance threshold.\nBecause the p-value is extremely small, we reject the null hypothesis. There is strong statistical evidence that negative revisions were not more common under Democrats. In fact, they were significantly less common.\n\nThese results contradict the fictional commentator’s claim: the historical record shows that CES revisions were more frequently negative under Republican administrations, not Democratic ones.","srcMarkdownNoYaml":"\n# Introduction\n\nEvery month, the Bureau of Labor Statistics releases the jobs report: one number that can move the stock market, shift interest rate expectations, and shape the political conversation overnight. Because so much rides on it, the accuracy of the jobs number matters. When President Trump fired BLS Commissioner Erika McEntarfer in 2025, arguing that the agency had produced “inflated” job figures, the decision immediately set off a national debate.\n\nThis project takes a step back from the politics and looks directly at the data behind that debate. Using employment levels and revision tables from 1979 to 2025, we examine how often the initial jobs numbers are revised, how large those revisions tend to be, and whether any patterns line up with the political claims being made. We summarize long-run trends, build visualizations, and run statistical tests to see what the evidence actually shows. \n\n\n# CES Non Farm Payroll Employment (1979–2025)\n```{r, results='hide', message=FALSE, warning=FALSE}\nlibrary(dplyr)\nlibrary(purrr)\nlibrary(stringr)\nlibrary(readr)\nlibrary(rvest)\nlibrary(httr2)\nlibrary(lubridate)\nlibrary(DT)\n\n\n# Task 1 — CES Total Nonfarm Payroll Employment\n\n```{r, results='hide', message=FALSE, warning=FALSE}\nlibrary(httr2)\nlibrary(rvest)\nlibrary(dplyr)\nlibrary(stringr)\nlibrary(lubridate)\nlibrary(DT)\n\n# Build the base request to the BLS Data Finder endpoint\nreq <- request(\"https://data.bls.gov\") |>\n  req_url_path_append(\"pdq\") |>\n  req_url_path_append(\"SurveyOutputServlet\") |>\n  req_method(\"POST\") |>\n  req_body_form(\n    request_action    = \"get_data\",\n    reformat          = \"true\",\n    from_results_page = \"true\",\n    from_year         = \"1979\",\n    to_year           = \"2025\",\n    initial_request   = \"false\",\n    data_tool         = \"surveymost\",\n    series_id         = \"CES0000000001\"\n  ) |>\n  # increase the time allowed for the request \n  req_timeout(60)\n\n# Perform the request\nresp <- req_perform(req)\n\n# Turn the response body into an HTML document\nces_page <- resp |>\n  resp_body_string() |>\n  read_html()\n\n# Extract all tables\nces_tables <- ces_page |>\n  html_elements(\"table\")\n\n# The second table holds the time series\nces_tbl_raw <- ces_tables[[2]] |>\n  html_table()\n\n# Reshape wide to long \nces_long <- ces_tbl_raw |>\n  tidyr::pivot_longer(\n    cols = Jan:Dec,\n    names_to  = \"month\",\n    values_to = \"level\"\n  )\n\n# Clean types and build a proper date column\nces_clean <- ces_long |>\n  mutate(\n    date  = ym(paste(Year, month)),      \n    level = as.numeric(level)\n  ) |>\n  select(date, level) |>\n  filter(!is.na(date), !is.na(level)) |>\n  filter(date >= as.Date(\"1979-01-01\"),\n         date <= as.Date(\"2025-06-01\")) |>\n  arrange(date)\n\nces_final <- ces_clean\n\n#  interactive table \ndatatable(\n  ces_final,\n  rownames = FALSE,\n  options = list(\n    pageLength = 5,\n    autoWidth  = TRUE,\n    dom        = \"tip\",\n    columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n  )\n) |>\n  formatStyle(\n    columns = names(ces_final),\n    `text-align` = \"center\"\n  ) |>\n  htmlwidgets::prependContent(\n    htmltools::tags$h3(\n      \"CES Total Nonfarm Payroll Employment (Final Estimates, 1979–2025)\",\n      style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n    )\n  )\n\nlibrary(DT)\n\n# Ensure the CES data is sorted correctly\nces_display <- ces_final |>\n  arrange(date)\n\n# interactive table\ndatatable(\n  ces_display,\n  rownames = FALSE,\n  options = list(\n    pageLength = 5,\n    autoWidth = TRUE,\n    dom = \"tip\",\n    columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n  )\n) |>\n  formatStyle(\n    columns = names(ces_display),\n    `text-align` = \"center\"\n  ) |>\n  htmlwidgets::prependContent(\n    htmltools::tags$h3(\n      \"CES Total Nonfarm Payroll Employment (Final Estimates, 1979–2025)\",\n      style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n    )\n  )\n```\n\n```{r}\n\ndatatable(\n  ces_display,\n  rownames = FALSE,\n  options = list(\n    pageLength = 12,\n    autoWidth = TRUE,\n    dom = \"tip\",\n    columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n  )\n) |>\n  formatStyle(\n    columns = names(ces_display),\n    `text-align` = \"center\"\n  ) |>\n  htmlwidgets::prependContent(\n    htmltools::tags$h3(\n      \"CES Total Nonfarm Payroll Employment (Final Estimates, 1979–2025)\",\n      style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n    )\n  )\n```\n\n---\n\n# CES Annual Revision Tables (1979–2025)\n```{r, results='hide', message=FALSE, warning=FALSE}\nlibrary(httr2)\nlibrary(rvest)\nlibrary(dplyr)\nlibrary(stringr)\nlibrary(lubridate)\nlibrary(purrr)\nlibrary(tibble)\n\n# Request the CES revisions page from BLS with a longer timeout\nrev_req <- request(\"https://www.bls.gov\") |>\n  req_url_path(\"web\", \"empsit\", \"cesnaicsrev.htm\") |>\n  req_headers(\n    `User-Agent` = \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:143.0) Gecko/20100101 Firefox/143.0\"\n  ) |>\n  req_timeout(60)   # allow up to 60 seconds for this request\n\nrev_resp <- rev_req |>\n  req_perform()\n\nrev_page <- rev_resp |>\n  resp_body_html()\n\n# Function to extract CES revisions for a single year\nget_ces_revisions_year <- function(yr, page = rev_page) {\n  # locate the table for this year using its id\n  year_node <- page |>\n    html_element(paste0(\"#\", yr))\n  \n  # if year not found, return an empty tibble with the right columns\n  if (is.null(year_node)) {\n    return(tibble(\n      date     = as.Date(character()),\n      original = integer(),\n      final    = integer(),\n      revision = integer()\n    ))\n  }\n  \n  # read the table body, no header\n  year_tbl <- year_node |>\n    html_element(\"tbody\") |>\n    html_table(header = FALSE)\n  \n  year_tbl |>\n    as_tibble() |>\n    # first 12 rows are Jan–Dec\n    slice(1:12) |>\n    transmute(\n      month    = X1,\n      year     = as.integer(X2),\n      original = as.integer(X3),\n      final    = as.integer(X5),\n      month_clean = stringr::str_replace(month, \"\\\\.\", \"\"),\n      date        = lubridate::ym(paste(year, month_clean)),\n      revision    = final - original\n    ) |>\n    select(date, original, final, revision) |>\n    filter(!is.na(date))\n}\n\n# Build full revisions data set for 1979–2025\nyears_full <- 1979:2025\n\nces_revisions_raw <- years_full |>\n  map(get_ces_revisions_year) |>\n  list_rbind() |>\n  arrange(date)\n\nces_revisions <- ces_revisions_raw |>\n  filter(date >= as.Date(\"1979-01-01\"),\n         date <= as.Date(\"2025-06-01\")) |>\n  arrange(date)\n\n# quick check\nhead(ces_revisions)\ntail(ces_revisions)\n\n```\n\n```{r}\ndatatable(\n  ces_revisions,\n  rownames = FALSE,\n  options = list(\n    pageLength = 12,\n    autoWidth = TRUE,\n    dom = \"tip\",\n    columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n  )\n) |>\n  formatStyle(\n    columns = names(ces_revisions),\n    `text-align` = \"center\"\n  ) |>\n  htmlwidgets::prependContent(\n    htmltools::tags$h3(\n      \"CES Nonfarm Payroll Revisions (Original vs Final, 1979–2025)\",\n      style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n    )\n  )\n\n\n```\n# Joined table\n```{r}\nlibrary(dplyr)\nlibrary(lubridate)\nlibrary(DT)\n\n# Build joined CES table for Task 3\nces_full <- ces_final |>\n  inner_join(ces_revisions, by = \"date\") |>\n  mutate(\n    year  = year(date),\n    month = month(date, label = TRUE, abbr = TRUE),\n    decade = (year %/% 10) * 10,\n    absolute_revision = abs(revision),\n    revision_pct = revision / final,\n    absolute_revision_pct = abs(revision) / final\n  ) |>\n  arrange(date)\n\n# Prepare display table \nces_full_display <- ces_full |>\n  arrange(date) |>\n  mutate(\n    Level               = round(level, 3),\n    Original            = round(original, 3),\n    Final               = round(final, 3),\n    Revision            = round(revision, 3),\n    AbsoluteRevision    = round(absolute_revision, 3),\n    AbsoluteRevisionPct = round(absolute_revision_pct, 3)\n  ) |>\n  select(\n    Date                 = date,\n    Level,\n    Original,\n    Final,\n    Revision,\n    AbsoluteRevision,\n    AbsoluteRevisionPct\n  )\n\n# Interactive table\ndatatable(\n  ces_full_display,\n  rownames = FALSE,\n  options = list(\n    pageLength = 10,\n    autoWidth  = TRUE,\n    dom        = \"tip\",\n    columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n  )\n) |>\n  formatStyle(\n    columns = names(ces_full_display),\n    `text-align` = \"center\"\n  ) |>\n  htmlwidgets::prependContent(\n    htmltools::tags$h3(\n      \"CES Levels and Revisions (Joined Table, 1979–2025)\",\n      style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n    )\n  )\n\n\n```\n\n# Data Exploration\n\n```{r, echo=FALSE, results=\"asis\"}\n\n\nlibrary(dplyr)\nlibrary(lubridate)\nlibrary(DT)\nlibrary(scales)\n\n# Clean joined CES table for analysis\nces_full_clean <- ces_full |>\n  filter(level > 0) |>\n  mutate(\n    absolute_revision = abs(revision),\n    revision_pct = revision / level,\n    absolute_revision_pct = abs(revision) / level\n  )\n\nstart_year <- year(min(ces_full_clean$date, na.rm = TRUE))\nend_year   <- year(max(ces_full_clean$date, na.rm = TRUE))\n\n# Stat 1: largest positive revision\nlargest_positive_revision <- ces_full_clean |>\n  slice_max(revision, n = 5)\n\nlargest_positive_display <- largest_positive_revision |>\n  mutate(\n    Level = round(level, 3),\n    Original = round(original, 3),\n    Final = round(final, 3),\n    Revision = round(revision, 3),\n    AbsoluteRevision = round(absolute_revision, 3),\n    AbsoluteRevisionPct = round(absolute_revision_pct, 5)\n  ) |>\n  select(\n    Date = date,\n    Level,\n    Original,\n    Final,\n    Revision,\n    AbsoluteRevision,\n    AbsoluteRevisionPct\n  )\n\ndatatable(\n  largest_positive_display,\n  rownames = FALSE,\n  options = list(\n    pageLength = 5,\n    autoWidth = TRUE,\n    dom = \"tip\",\n    columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n  )\n) |>\n  formatStyle(\n    columns = names(largest_positive_display),\n    `text-align` = \"center\"\n  ) |>\n  htmlwidgets::prependContent(\n    htmltools::tags$h3(\n      sprintf(\"Stat 1: Largest Positive CES Revision (%d–%d)\", start_year, end_year),\n      style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n    )\n  )\n\n# Stat 2: largest negative revision\nlargest_negative_revision <- ces_full_clean |>\n  slice_min(revision, n = 5)\n\nlargest_negative_display <- largest_negative_revision |>\n  mutate(\n    Level = round(level, 3),\n    Original = round(original, 3),\n    Final = round(final, 3),\n    Revision = round(revision, 3),\n    AbsoluteRevision = round(absolute_revision, 3),\n    AbsoluteRevisionPct = round(absolute_revision_pct, 5)\n  ) |>\n  select(\n    Date = date,\n    Level,\n    Original,\n    Final,\n    Revision,\n    AbsoluteRevision,\n    AbsoluteRevisionPct\n  )\n\ndatatable(\n  largest_negative_display,\n  rownames = FALSE,\n  options = list(\n    pageLength = 5,\n    autoWidth = TRUE,\n    dom = \"tip\",\n    columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n  )\n) |>\n  formatStyle(\n    columns = names(largest_negative_display),\n    `text-align` = \"center\"\n  ) |>\n  htmlwidgets::prependContent(\n    htmltools::tags$h3(\n      sprintf(\"Stat 2: Largest Negative CES Revision (%d–%d)\", start_year, end_year),\n      style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n    )\n  )\n\n# Stats 3–6: summary statistics in one table\navg_revision <- ces_full_clean |>\n  summarise(mean_revision = mean(revision, na.rm = TRUE)) |>\n  pull(mean_revision)\n\navg_absolute_revision <- ces_full_clean |>\n  summarise(mean_abs_revision = mean(absolute_revision, na.rm = TRUE)) |>\n  pull(mean_abs_revision)\n\navg_absolute_revision_pct <- ces_full_clean |>\n  summarise(mean_abs_revision_pct = mean(absolute_revision_pct, na.rm = TRUE)) |>\n  pull(mean_abs_revision_pct)\n\nfraction_positive_overall <- ces_full_clean |>\n  summarise(fraction_positive = mean(revision > 0, na.rm = TRUE)) |>\n  pull(fraction_positive)\n\nstats_3_6_table <- tibble(\n  Statistic = c(\n    \"Average revision (thousand jobs)\",\n    \"Average absolute revision (thousand jobs)\",\n    \"Average absolute revision as percent of employment\",\n    \"Fraction of months with positive revisions\"\n  ),\n  Value = c(\n    round(avg_revision, 3),\n    round(avg_absolute_revision, 3),\n    percent(avg_absolute_revision_pct, accuracy = 0.01),\n    percent(fraction_positive_overall, accuracy = 0.1)\n  )\n)\n\ndatatable(\n  stats_3_6_table,\n  rownames = FALSE,\n  options = list(\n    pageLength = 4,\n    autoWidth = TRUE,\n    dom = \"tip\",\n    columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n  )\n) |>\n  formatStyle(\n    columns = names(stats_3_6_table),\n    `text-align` = \"center\"\n  ) |>\n  htmlwidgets::prependContent(\n    htmltools::tags$h3(\n      sprintf(\"Stats 3–6: Overall CES Revision Summary (%d–%d)\", start_year, end_year),\n      style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n    )\n  )\n\n# New stat: average revision by calendar month across all years\nmonthly_revision_table <- ces_full_clean |>\n  mutate(\n    month_num = month(date),\n    month_name = month(date, label = TRUE, abbr = TRUE)\n  ) |>\n  group_by(month_num, month_name) |>\n  summarise(\n    AverageRevision = mean(revision, na.rm = TRUE),\n    AverageAbsoluteRevision = mean(absolute_revision, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |>\n  arrange(month_num) |>\n  transmute(\n    Month = as.character(month_name),\n    AverageRevision = round(AverageRevision, 3),\n    AverageAbsoluteRevision = round(AverageAbsoluteRevision, 3)\n  )\n\ndatatable(\n  monthly_revision_table,\n  rownames = FALSE,\n  options = list(\n    pageLength = 12,\n    autoWidth = TRUE,\n    dom = \"tip\",\n    columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n  )\n) |>\n  formatStyle(\n    columns = names(monthly_revision_table),\n    `text-align` = \"center\"\n  ) |>\n  htmlwidgets::prependContent(\n    htmltools::tags$h3(\n      \"Stat 7: Average CES Revision by Calendar Month \",\n      style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n    )\n  )\n\n```\n 4 visualizations\n```{r}\n\nlibrary(ggplot2)\nlibrary(scales)\nlibrary(dplyr)\n\n\n# Plot 1: CES employment level over time\nggplot(ces_full, aes(x = date, y = level)) +\n  geom_line() +\n  labs(\n    title = \"CES Total Nonfarm Payroll Employment Level (1979–2025)\",\n    x = \"Year\",\n    y = \"Employment Level (thousands of jobs)\"\n  ) +\n  scale_y_continuous(labels = comma) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    axis.title = element_text()\n  )\n\n# Plot 2: CES revisions over time by magnitude\nggplot(ces_full, aes(x = date, y = revision)) +\n  geom_line() +\n  geom_hline(yintercept = 0, linewidth = 0.4) +\n  labs(\n    title = \"CES Revisions Over Time (Final minus Original, 1979–2025)\",\n    x = \"Year\",\n    y = \"Revision in Employment Level (thousands of jobs)\"\n  ) +\n  scale_y_continuous(labels = comma) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    axis.title = element_text()\n  )\n\n# Plot 3: average positive and negative CES revisions over time (absolute value)\nrev_pos_neg_year <- ces_full |>\n  mutate(\n    rev_type = if_else(revision >= 0, \"Positive Revision\", \"Negative Revision\"),\n    abs_rev = abs(revision)\n  ) |>\n  group_by(year, rev_type) |>\n  summarise(\n    avg_abs_revision = mean(abs_rev, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\nggplot(rev_pos_neg_year, aes(x = year, y = avg_abs_revision, fill = rev_type)) +\n  geom_col(position = \"dodge\") +\n  geom_smooth(\n    aes(color = rev_type),\n    method = \"loess\",\n    se = FALSE,\n    linewidth = 1.2\n  ) +\n  labs(\n    title = \"Average Positive and Negative CES Revisions by Year\",\n    x = \"Year\",\n    y = \"Average Absolute Revision (thousands of jobs)\",\n    fill = \"Revision Type\",\n    color = \"Trend\"\n  ) +\n  scale_y_continuous(labels = comma) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    axis.text.x = element_text(angle = 90, vjust = 0.5)\n  )\n\n# Plot 4: Absolute revision percentage over time using cleaned data\nggplot(ces_full_clean, aes(x = date, y = absolute_revision_pct)) +\n  geom_line() +\n  labs(\n    title = \"CES Revision as a Percentage of Overall Employment\",\n    x = \"Year\",\n    y = \"Absolute Revision as Percent of Employment\"\n  ) +\n  scale_y_continuous(labels = percent_format(accuracy = 0.01)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    axis.title = element_text()\n  )\n\n```\n# Statistical Analysis\n\n###### A t test is a common tool used in hypothesis testing. Hypothesis testing is a  way to decide whether a pattern we see in data is large enough to conclude that some underlying effect is happening, rather than just the result of randomness. For CES revisions, the question is whether the average revision significantly differs from zero. If CES estimates are unbiased, then the initial and final numbers should, on average, be the same.\n###### To answer this, we set up two competing hypotheses:\n\n###### -  Null hypothesis (H₀): The true average CES revision is 0.\n######  -  Alternative hypothesis (H₁): The true average CES revision is not 0.\n  \n###### The t test evaluates how far the observed sample mean revision is from zero, relative to the amount of natural month 2to month variation in revisions. Even if the true average were exactly zero, revisions would still jump around randomly each month, so a small nonzero mean could occur by chance. The t test asks: Is the observed mean bigger than what chance alone would likely produce?\n###### The main output of the test is the p-value, which tells us how likely it is to observe a sample mean at least this extreme if the true mean were actually zero. In most statistical work, a p-value below 0.05 is considered strong enough to reject the null hypothesis. A p-value below 0.01 is even stronger evidence. When the p-value becomes extremely small, it indicates the observed pattern would be extraordinarily unlikely if the true mean were zero.\n###### The t test also produces a 95% confidence interval, which gives a range of values that are plausible for the true average revision based on the data. If this interval does not include zero, it supports the conclusion that the true mean revision is meaningfully different from zero.\n###### Together, the t test, its p-value, and the confidence interval provide a clear framework for determining whether CES revisions tend to be biased upward or downward, rather than centered around zero.\n\n```{r}\n\n# Task 4: Statistical Inference (t_test and prop_test)\n\n\nlibrary(infer)\nlibrary(dplyr)\nlibrary(lubridate)\nlibrary(glue)\nlibrary(scales)\nlibrary(DT)\nlibrary(tools)\n\n\n# UNIVERSAL COLUMN NAME CLEANER \nclean_colnames <- function(df) {\n  nn <- names(df)\n  nn <- gsub(\"_\", \" \", nn)\n  nn <- trimws(nn)\n  nn <- toTitleCase(nn)\n\n  # uppercase acronyms\n  acronyms <- c(\"Ci\", \"Df\", \"Id\", \"Na\", \"P\", \"T\", \"R\")\n  for (ac in acronyms) {\n    nn <- gsub(paste0(\"\\\\b\", ac, \"\\\\b\"), toupper(ac), nn)\n  }\n\n  names(df) <- nn\n  df\n}\n\n\n\nmake_dt <- function(df, title, pageLength = 10) {\n  df2 <- clean_colnames(df)\n\n  dt <- datatable(\n    df2,\n    rownames = FALSE,\n    options = list(\n      pageLength = pageLength,\n      autoWidth  = TRUE,\n      dom        = \"tip\",\n      columnDefs = list(list(className = \"dt-center\", targets = \"_all\"))\n    )\n  ) |>\n    formatStyle(\n      columns = names(df2),\n      `text-align` = \"center\"\n    ) |>\n    htmlwidgets::prependContent(\n      htmltools::tags$h3(\n        title,\n        style = \"text-align:center; font-weight:medium; font-size:18px; color:#222; margin-bottom:20px;\"\n      )\n    )\n\n  dt\n}\n\n# Make sure data exists\nces_full_clean_ok <- ces_full_clean |> filter(!is.na(revision))\n```\n\n\n```{r}\n\n# TEST 1: Is the mean revision different from 0?\n\ntest1_result <- t_test(\n  ces_full_clean_ok,\n  response = revision,\n  mu = 0\n)\n\nt1_estimate <- test1_result |> pull(estimate)\nt1_pvalue   <- test1_result |> pull(p_value)\nt1_lower    <- test1_result |> pull(lower_ci)\nt1_upper    <- test1_result |> pull(upper_ci)\n\ntest1_display <- test1_result |>\n  transmute(\n    Estimate = round(estimate, 2),\n    T_Df     = round(t_df, 1),\n    P_Value  = signif(p_value, 3),\n    Lower_CI = round(lower_ci, 2),\n    Upper_CI = round(upper_ci, 2)\n  )\n\nmake_dt(\n  test1_display,\n  title = \"Test 1: Is the Average CES Revision Different From Zero?\",\n  pageLength = 5\n)\n\nstart_year <- year(min(ces_full_clean_ok$date))\nend_year   <- year(max(ces_full_clean_ok$date))\n\ncat(\n  glue(\n    \n    \"A t-test gives p = {signif(t1_pvalue, 3)} with a 95% CI of \",\n    \"{comma(round(t1_lower, 1))} to {comma(round(t1_upper, 1))} thousand.\\n\\n\"\n  )\n)\n\n\n```\n\n##### From 1979 to 2025, the average CES revision was 12 thousand jobs, meaning that the final published estimate was typically higher than the initial release. A t-test comparing the mean revision to zero yields a p-value of 0.00118, and the 95% confidence interval for the true mean revision ranges from 5 to 18 thousand jobs. This means there is statistically significant evidence that revisions are not centered at zero. Essentially, the average revision is small relative to total U.S. employment, but large enough that it can influence short-run interpretations of monthly job reports.\n\n```{r echo=FALSE, results='asis'}\n\n# TEST 2 — Did negative revision frequency change after 2000?\n\nces_full_clean_period <- ces_full_clean_ok |>\n  mutate(\n    period_post2000 = if_else(year(date) >= 2000, \"Post2000\", \"Pre2000\"),\n    neg_numeric     = if_else(revision < 0, 1, 0)   # \n  ) |>\n  filter(!is.na(neg_numeric))\n\n# Fractions for interpretation\nneg_frac_by_period <- ces_full_clean_period |>\n  group_by(period_post2000) |>\n  summarise(\n    Months = n(),\n    FractionNegative = mean(neg_numeric),\n    .groups = \"drop\"\n  )\n\npre_frac <- neg_frac_by_period |>\n  filter(period_post2000 == \"Pre2000\") |>\n  pull(FractionNegative)\n\npost_frac <- neg_frac_by_period |>\n  filter(period_post2000 == \"Post2000\") |>\n  pull(FractionNegative)\n\n# infer t_test \ntest2_result <- t_test(\n  ces_full_clean_period,\n  neg_numeric ~ period_post2000,\n  order = c(\"Pre2000\", \"Post2000\")\n)\n\nt2_estimate <- pull(test2_result, estimate)\nt2_pvalue   <- pull(test2_result, p_value)\nt2_lower    <- pull(test2_result, lower_ci)\nt2_upper    <- pull(test2_result, upper_ci)\n\ntest2_display <- tibble(\n  DifferenceInFractions = round(t2_estimate, 3),\n  T_Df                  = round(test2_result$t_df, 1),\n  P_Value               = signif(t2_pvalue, 3),\n  Lower_CI              = round(t2_lower, 3),\n  Upper_CI              = round(t2_upper, 3)\n)\n\nmake_dt(\n  test2_display,\n  title = \"Test 2: Did Negative Revision Frequency Change After 2000?\",\n  pageLength = 5\n)\n\n\n\n```\n\n\n\n##### Before 2000, 40.5% of CES revisions were negative, compared to 44.1% after 2000.\n##### The estimated difference (Post − Pre) is −0.036, meaning that negative revisions were slightly more common after 2000, but only by about 3.6 percentage points.\n\n##### A t-test gives:\n  -  Difference in fractions: −0.036\n  -  95% confidence interval: −0.119 to 0.046\n  -  p-value: 0.387\n  -  Degrees of freedom: 537.8\n  \n##### This confidence interval includes both negative and positive values, indicating substantial uncertainty about the true change. The p-value of 0.387 is far above conventional significance levels (such as 0.05), showing that the observed difference is well within the range of natural random variation.\n\n##### There is no evidence that the frequency of negative revisions changed significantly after the year 2000. The rate of negative revisions appears largely stable over time, with no indication of a structural shift.\n\n# BLS Fact Check\n\n\n##  Does the Data Support the White House’s Claim?\n\nThe Trump administration’s public justification for firing the Bureau of Labor Statistics Commissioner Erika McEntarfer makes a bold claim. As the White House put it, the BLS under her leadership has shown “a lengthy history of inaccuracies and incompetence”, and published “overly optimistic jobs numbers - only for those numbers to be quietly revised later.”\n\nTrump argues that Commissioner McEntarfer repeatedly published inflated preliminary job numbers during the Biden administration, making the economy appear stronger than it was. He further claims that she continued this pattern after he took office, now suggesting that overly optimistic job reports would discourage the Federal Reserve from cutting interest rates, a policy he publicly supports.\n\nThe White House claim suggests two things about the period under McEntarfer which started February 2024:\n\n  - Large revisions are more common than in earlier decades.\n  - Negative revisions are also more common, implying that initial job estimates were systematically overstated.\n\nTo evaluate whether the data supports this narrative, we perform two statistical comparisons between the McEntarfer era (Feb 2024–Jun 2025) and the historical period (1979–Jan 2024):\n\n**Test A: Is the share of substantial revisions (revisions greater than 50,000 jobs) significantly higher under McEntarfer?**\n\n**Test B: Is the share of negative revisions significantly higher under McEntarfer?**\n\nIf either proportion shows a statistically significant increase, then the data would give empirical support to the White House’s claim. \n\nIf both changes are statistically insignificant, the historical revision record does not support the rationale for the dismissal.\n\n\n#### **Test A: Is the share of substantial revisions more common under McEntarfer? **\n\n```{r}\n# Test A: Is the share of substantial revisions more common under McEntarfer?\n\nlibrary(dplyr)\nlibrary(lubridate)\nlibrary(infer)\n\n# Define eras and a \"substantial revision\" indicator \nces_fc1 <- ces_full_clean |>\n  mutate(\n    era = if_else(\n      date >= as.Date(\"2024-02-01\") & date <= as.Date(\"2025-06-01\"),\n      \"McEntarfer\",\n      \"Earlier\"\n    ),\n    substantial = as.integer(abs(revision) > 50)\n  )\n\n# Summary table (rounded to 3 decimals)\nfc1a_summary <- ces_fc1 |>\n  group_by(era) |>\n  summarise(\n    Months              = n(),\n    FractionSubstantial = round(mean(substantial, na.rm = TRUE), 3),\n    .groups = \"drop\"\n  )\n\nmake_dt(\n  fc1a_summary,\n  title = \"Fraction of Substantial Revisions (>|50,000| Jobs), Earlier vs McEntarfer\",\n  pageLength = 5\n)\n\n# Two-sample Welch t-test \nfc1a_test <- t_test(\n  ces_fc1,\n  substantial ~ era,\n  order = c(\"Earlier\", \"McEntarfer\")\n)\n\n# Display table rounded to 3 decimals\nfc1a_display <- fc1a_test |>\n  transmute(\n    Difference = round(estimate, 3),\n    T_Df       = round(t_df, 3),\n    P_Value    = signif(p_value, 3),\n    Lower_CI   = round(lower_ci, 3),\n    Upper_CI   = round(upper_ci, 3)\n  )\n\nmake_dt(\n  fc1a_display,\n  title = \"Test A: Are Substantial Revisions More Common in the McEntarfer Era?\",\n  pageLength = 5\n)\n\n# Save values for inline use\nfc1a_diff  <- round(as.numeric(fc1a_test$estimate), 3)\nfc1a_p     <- signif(as.numeric(fc1a_test$p_value), 3)\nfc1a_lower <- round(as.numeric(fc1a_test$lower_ci), 3)\nfc1a_upper <- round(as.numeric(fc1a_test$upper_ci), 3)\n\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(lubridate)\nlibrary(scales)\n\n# Build dataset for substantial revisions only\nsubstantial_yearly <- ces_full_clean |>\n  mutate(\n    year = year(date),\n    substantial = abs(revision) > 50,                # 50 = 50,000 jobs\n    era = if_else(\n      date < as.Date(\"2024-02-01\"),\n      \"Earlier\",\n      \"McEntarfer\"\n    )\n  ) |>\n  filter(substantial) |>                              # keep only substantial revisions\n  group_by(year, era) |>\n  summarise(\n    Count = n(),\n    .groups = \"drop\"\n  )\n\nggplot(substantial_yearly, aes(x = year, y = Count, fill = era)) +\n  geom_col() +\n  scale_fill_manual(\n    values = c(\n      \"Earlier\"     = \"#C92A2A\",  # red\n      \"McEntarfer\"  = \"#1971C2\"   # blue\n    )\n  ) +\n  labs(\n    title = \"Number of Substantial CES Revisions per Year\",\n    subtitle = \"Substantial revisions defined as |revision| > 50,000 jobs\",\n    x = \"Year\",\n    y = \"Count of Substantial Revisions\",\n    fill = \"Era\"\n  ) +\n  scale_x_continuous(breaks = seq(1980, 2025, 5)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title    = element_text(face = \"bold\"),\n    plot.subtitle = element_text(),\n    axis.text.x   = element_text(angle = 90, vjust = 0.5)\n  )\n\n```\n\nTo evaluate whether substantial revisions were more common under Commissioner McEntarfer, we tested the hypotheses:\n\nH₀: The proportion of substantial revisions is the same in the McEntarfer era and the earlier period.\n\nH₁: The proportion of substantial revisions is different between the two periods.\n\nThe estimated difference in proportions (McEntarfer minus Earlier) was −0.058, meaning the McEntarfer era actually had a slightly lower share of substantial revisions. The 95% confidence interval ranged from −0.326 to 0.209, which includes zero. This indicates that the true difference could reasonably be negative, zero, or positive.\n\nThe p-value for this test was 0.65, which is far greater than the conventional 0.05 threshold. Because the p-value is so large, we fail to reject the null hypothesis. In practical terms, there is no statistical evidence that substantial revisions became more common under McEntarfer. The small observed difference is well within the level of variation that would be expected by random chance.\n\nAdditionally, the short tenure of McEntarfer lends to a very small sample size to test on for that era. \n\n\n\n#### **Test B: Are negative revisions more common under McEntarfer? **\n\n```{r}\n\n# Test B: Are negative revisions more common under McEntarfer?\n\n\nces_fc2 <- ces_full_clean |>\n  mutate(\n    era = if_else(\n      date >= as.Date(\"2024-02-01\") & date <= as.Date(\"2025-06-01\"),\n      \"McEntarfer\",\n      \"Earlier\"\n    ),\n    negative_rev = as.integer(revision < 0)\n  )\n\n# Summary table (rounded to 3 decimals)\nfc2b_summary <- ces_fc2 |>\n  group_by(era) |>\n  summarise(\n    Months           = n(),\n    FractionNegative = round(mean(negative_rev, na.rm = TRUE), 3),\n    .groups = \"drop\"\n  )\n\nmake_dt(\n  fc2b_summary,\n  title = \"Fraction of Negative Revisions, Earlier vs McEntarfer\",\n  pageLength = 5\n)\n\n# Welch t-test on the 0/1 indicator\nfc2b_test <- t_test(\n  ces_fc2,\n  negative_rev ~ era,\n  order = c(\"Earlier\", \"McEntarfer\")\n)\n\n# Display table rounded to 3 decimals\nfc2b_display <- fc2b_test |>\n  transmute(\n    Difference = round(estimate, 3),\n    T_Df       = round(t_df, 3),\n    P_Value    = signif(p_value, 3),\n    Lower_CI   = round(lower_ci, 3),\n    Upper_CI   = round(upper_ci, 3)\n  )\n\nmake_dt(\n  fc2b_display,\n  title = \"Test B: Are Negative Revisions More Common in the McEntarfer Era?\",\n  pageLength = 5\n)\n\n# Save values for inline use\nfc2b_diff  <- round(as.numeric(fc2b_test$estimate), 3)\nfc2b_p     <- signif(as.numeric(fc2b_test$p_value), 3)\nfc2b_lower <- round(as.numeric(fc2b_test$lower_ci), 3)\nfc2b_upper <- round(as.numeric(fc2b_test$upper_ci), 3)\n\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(scales)\nlibrary(lubridate)\n\n# Add an era variable for coloring\nces_rev_era <- ces_full |>\n  mutate(\n    era = if_else(\n      date < as.Date(\"2024-02-01\"),\n      \"Earlier\",\n      \"McEntarfer\"\n    )\n  )\n\nggplot(ces_rev_era, aes(x = date, y = revision, color = era)) +\n  geom_line() +\n  geom_hline(yintercept = 0, linewidth = 0.4) +\n  scale_color_manual(\n    values = c(\n      \"Earlier\"     = \"#C92A2A\",  # red\n      \"McEntarfer\"  = \"#1971C2\"   # blue\n    )\n  ) +\n  labs(\n    title = \"CES Revisions Over Time (Earlier vs McEntarfer Period)\",\n    subtitle = \"Revisions shown as final minus original estimates\",\n    x = \"Year\",\n    y = \"Revision in Employment Level (thousands of jobs)\",\n    color = \"Era\"\n  ) +\n  scale_y_continuous(labels = comma) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title    = element_text(face = \"bold\"),\n    plot.subtitle = element_text(),\n    axis.title    = element_text()\n  )\n\n```\nTo evaluate whether negative revisions were more common under Commissioner McEntarfer, we tested the hypotheses:\n\nH₀: The proportion of negative revisions is the same in the McEntarfer era and the earlier period.\n\nH₁: The proportions differ between the two periods.\n\nThe earlier period had a negative revision rate of 0.418, compared with 0.647 under McEntarfer, a raw increase of about 23 percentage points. The estimated difference in proportions (McEntarfer minus Earlier) was –0.229, and the 95% confidence interval ranged from –0.485 to 0.027. Because this interval includes zero, the data do not rule out the possibility that the true difference is actually zero or even slightly positive.\n\nThe p-value for the test was 0.0759, which is above 0.05. Since the p-value is not small enough to reject the null hypothesis, we conclude that there is not sufficient statistical evidence that negative revisions became more common under McEntarfer. Although the observed difference is large in magnitude, the limited number of months in the McEntarfer period (n = 17) means the estimate is imprecise, and the result is not statistically significant at the 5% level.\n\nCitation:\nWhite House. “BLS Has Lengthy History of Inaccuracies, Incompetence.” whitehouse.gov, August 1, 2025. https://www.whitehouse.gov/articles/2025/08/bls-has-lengthy-history-of-inaccuracies-incompetence/\n\n\n\n## **Does the Data Support the Claim That the BLS Favors Democratic Administrations?** \n\nBeyond the debate over Commissioner McEntarfer’s dismissal, some (fictional) political commentators have argued that the Bureau of Labor Statistics tends to produce stronger employment numbers when a Democrat is in the White House. \n\nThe claim suggests that the CES estimates are somehow influenced by partisan considerations, leading to higher published job numbers and stronger perceived employment growth during Democratic administrations.\n\nAs one commentator put it, the BLS “always seems to report better job numbers for Democrats than Republicans” implying that the agency systematically favors one party over the other. \n\nThis claim implies two measurable expectations about the historical jobs data:\n\n  - Employment levels should be higher under Democratic presidents because the BLS allegedly portrays stronger economic performance during Democratic administrations.\n  - Revisions under democratic administrations should be more often negative. \n  \n  \nTo evaluate whether the data support this narrative, we compare the full CES record from 1979 to 2025 across presidential administrations, classifying each month according to the president’s political party. This allows us to test whether differences in employment levels and job growth between Democratic and Republican presidencies are statistically meaningful or simply reflect long term economic trends such as population growth and business cycles.\nWe perform two statistical comparisons between Democrat led months and Republican led months:\n\n**Test C: Are CES employment levels significantly higher during Democratic presidencies?**\n\n**Test D: Are monthly CES revisions more often negative during Democratic presidencies?**\n\nIf either test reveals statistically significant differences, that would provide empirical support for the claim that CES employment reporting favors Democratic administrations. If both differences are statistically insignificant, the historical data would not support the allegation that the BLS is biased to either party.\n\nIf either test reveals statistically significant differences, that would provide empirical support for the claim that CES employment reporting favors Democratic administrations. If both differences are statistically insignificant, the historical data would not support the allegation that the BLS is biased to either party.\n\n\n### **Test C: Are CES employment levels significantly higher during Democratic presidencies?**\n\n```{r}\nlibrary(dplyr)\nlibrary(lubridate)\nlibrary(tidyr)\nlibrary(infer)\nlibrary(ggplot2)\nlibrary(scales)\n\n# 1. Presidential party lookup table (1979–2025)\npresidents_party <- expand_grid(\n  year = 1979:2025,\n  month = month.name,\n  president = NA_character_,\n  party = NA_character_\n) |>\n  mutate(\n    president = case_when(\n      (month == \"January\")  & (year == 1979) ~ \"Carter\",\n      (month == \"February\") & (year == 1981) ~ \"Reagan\",\n      (month == \"February\") & (year == 1989) ~ \"Bush 41\",\n      (month == \"February\") & (year == 1993) ~ \"Clinton\",\n      (month == \"February\") & (year == 2001) ~ \"Bush 43\",\n      (month == \"February\") & (year == 2009) ~ \"Obama\",\n      (month == \"February\") & (year == 2017) ~ \"Trump I\",\n      (month == \"February\") & (year == 2021) ~ \"Biden\",\n      (month == \"February\") & (year == 2025) ~ \"Trump II\",\n      TRUE ~ NA_character_\n    )\n  ) |>\n  tidyr::fill(president) |>\n  mutate(\n    party = if_else(\n      president %in% c(\"Carter\", \"Clinton\", \"Obama\", \"Biden\"),\n      \"D\",\n      \"R\"\n    ),\n    month_num = match(month, month.name)\n  )\n\n# 2. Join CES levels to presidents/parties and build pct_change\n\n\nces_party <- ces_full |>\n  mutate(\n    year = year(date),\n    month_num = month(date)\n  ) |>\n  left_join(\n    presidents_party |>\n      select(year, month_num, president, party),\n    by = c(\"year\", \"month_num\")\n  ) |>\n  filter(!is.na(party)) |>\n  arrange(date) |>\n  mutate(\n    change = level - lag(level),\n    pct_change = change / lag(level)\n  ) |>\n  filter(!is.na(change), !is.na(pct_change))\n\n# 3. Test C: Are monthly percent job gains higher under Democratic presidents?\n\n# Summary table by party (normalized percent changes)\nparty_pct_summary <- ces_party |>\n  group_by(party) |>\n  summarise(\n    Months          = n(),\n    MeanPctChange   = round(mean(pct_change, na.rm = TRUE), 3),\n    MedianPctChange = round(median(pct_change, na.rm = TRUE), 3),\n    SDPCT           = round(sd(pct_change, na.rm = TRUE), 3),\n    .groups = \"drop\"\n  ) |>\n  mutate(\n    PartyLabel = if_else(party == \"D\", \"Democrat\", \"Republican\")\n  ) |>\n  select(\n    Party = PartyLabel,\n    Months,\n    MeanPctChange,\n    MedianPctChange,\n    SDPCT\n  )\n\nmake_dt(\n  party_pct_summary,\n  title = \"Monthly Percent Employment Growth by Presidential Party (1979–2025)\",\n  pageLength = 5\n)\n\n# Welch t-test on normalized percent changes\nparty_pct_test <- t_test(\n  ces_party,\n  pct_change ~ party,\n  order = c(\"R\", \"D\"),    # estimate = Democrat minus Republican\n  alternative = \"greater\" # test if Democrats > Republicans\n)\n\nparty_pct_display <- party_pct_test |>\n  transmute(\n    Difference = round(estimate, 3),\n    T_Df       = round(t_df, 3),\n    P_Value    = signif(p_value, 3),\n    Lower_CI   = round(lower_ci, 3),\n    Upper_CI   = round(upper_ci, 3)\n  )\n\nmake_dt(\n  party_pct_display,\n  title = \"Test C: Are Monthly Percent Job Gains Higher Under Democratic Presidents?\",\n  pageLength = 5\n)\n\n\npct_diff  <- round(as.numeric(party_pct_test$estimate), 3)\npct_p     <- signif(as.numeric(party_pct_test$p_value), 3)\npct_lower <- round(as.numeric(party_pct_test$lower_ci), 3)\npct_upper <- round(as.numeric(party_pct_test$upper_ci), 3)\n\n# 4. Visual 1: CES employment levels over time colored by party\nggplot(ces_party, aes(x = date, y = level, color = party)) +\n  geom_line() +\n  scale_color_manual(\n    values = c(\"D\" = \"#1F77B4\", \"R\" = \"#D62728\"),\n    labels = c(\"D\" = \"Democrat\", \"R\" = \"Republican\")\n  ) +\n  labs(\n    title = \"CES Employment Levels by Presidential Party\",\n    x = \"Year\",\n    y = \"Employment Level (thousands of jobs)\",\n    color = \"Party\"\n  ) +\n  scale_y_continuous(labels = comma) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    axis.title = element_text()\n  )\n\n# 5. Visual 2: Average monthly percent change by president \npresident_change_summary <- ces_party |>\n  group_by(president, party) |>\n  summarise(\n    MeanPctChange = mean(pct_change, na.rm = TRUE),\n    Months = n(),\n    .groups = \"drop\"\n  ) |>\n  mutate(\n    President = factor(\n      president,\n      levels = c(\"Carter\", \"Reagan\", \"Bush 41\", \"Clinton\",\n                 \"Bush 43\", \"Obama\", \"Trump I\", \"Biden\", \"Trump II\")\n    )\n  )\n\nggplot(president_change_summary,\n       aes(x = President, y = MeanPctChange, fill = party)) +\n  geom_col() +\n  scale_fill_manual(\n    values = c(\"D\" = \"#1F77B4\", \"R\" = \"#D62728\"),\n    labels = c(\"D\" = \"Democrat\", \"R\" = \"Republican\")\n  ) +\n  labs(\n    title = \"Average Monthly Percent Job Growth by President\",\n    x = \"President\",\n    y = \"Average Monthly Percent Change\",\n    fill = \"Party\"\n  ) +\n  scale_y_continuous(labels = percent_format(accuracy = 0.01)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    axis.text.x = element_text(angle = 45, hjust = 1)\n  )\n\n```\n\nTest C: Are Monthly Percent Job Gains Higher Under Democratic Presidents?\nTo evaluate the claim that the Bureau of Labor Statistics tends to report stronger job growth under Democratic administrations, we compared the monthly percent change in total nonfarm payroll employment across presidential parties from 1979 to 2025.\n\nThe hypotheses for this test were:\n\nH₀: The mean monthly percent job growth is the same under Democratic and Republican presidents.\n\nH₁: The mean monthly percent job growth is higher under Democratic presidents.\n\n\nAcross the full sample, Democratic presidents oversaw 264 months of data with an average monthly percent gain of 0.002, while Republican presidents oversaw 293 months with an average gain of 0.001. The median growth rate was also slightly higher for Democrats (0.002 versus 0.001). However, Republicans had much larger variability in their monthly changes, with a standard deviation of 0.009, compared with 0.002 for Democrats.\n\nA Welch t-test comparing the distributions found an estimated difference of –0.001 (Democrat minus Republican), with a 95% confidence interval ranging from –0.002 to approximately 0.000. The p-value was 0.956, which is far above the conventional significance threshold of 0.05.\n\nBecause the p-value is not small and the confidence interval includes zero, we fail to reject the null hypothesis. The data does not provide statistical evidence that monthly percent job growth is higher under Democratic presidents. The small observed difference in averages is well within the range that could be explained by normal  variation rather than a systematic pattern related to presidential party.\n\n### **Test D: Are monthly CES revisions more often negative during Democratic presidencies?**\n\n```{r}\n# Test D: Are monthly CES revisions more often negative during Democratic presidencies?\n\nlibrary(dplyr)\nlibrary(infer)\nlibrary(DT)\nlibrary(ggplot2)\nlibrary(scales)\n\n# ces_party is assumed to contain:\n#   date, level, revision, president, party (\"D\" / \"R\")\n\n# 1. Add a 0/1 indicator for negative revisions\nces_party_neg <- ces_party |>\n  mutate(\n    negative = as.integer(revision < 0)   # 1 = negative revision, 0 = not\n  )\n\n# 2. Summary table: fraction of negative revisions by party (rounded to 3 decimals)\ntd_summary <- ces_party_neg |>\n  group_by(party) |>\n  summarise(\n    Months           = n(),\n    FractionNegative = round(mean(negative, na.rm = TRUE), 3),\n    .groups = \"drop\"\n  ) |>\n  mutate(\n    Party = if_else(party == \"D\", \"Democrat\", \"Republican\")\n  ) |>\n  select(\n    Party,\n    Months,\n    FractionNegative\n  )\n\nmake_dt(\n  td_summary,\n  title = \"Fraction of Negative CES Revisions by Presidential Party (1979–2025)\",\n  pageLength = 5\n)\n\n# 3. Test D: Are negative revisions more common under Democrats?\n#    H0: mean(negative) is the same for D and R\n#    H1: mean(negative) is higher for Democrats\n\ntd_test <- t_test(\n  ces_party_neg,\n  negative ~ party,\n  order = c(\"R\", \"D\"),       # estimate = Democrat minus Republican\n  alternative = \"greater\"    # test if Democrats have more negative revisions\n)\n\ntd_display <- td_test |>\n  transmute(\n    Difference = round(estimate, 3),\n    T_Df       = round(t_df, 3),\n    P_Value    = signif(p_value, 3),\n    Lower_CI   = round(lower_ci, 3),\n    Upper_CI   = round(upper_ci, 3)\n  )\n\nmake_dt(\n  td_display,\n  title = \"Test D: Are Negative Revisions More Common Under Democratic Presidents?\",\n  pageLength = 5\n)\n\n# Save key values for inline text in your write-up\ntd_diff  <- round(as.numeric(td_test$estimate), 3)\ntd_p     <- signif(as.numeric(td_test$p_value), 3)\ntd_lower <- round(as.numeric(td_test$lower_ci), 3)\ntd_upper <- round(as.numeric(td_test$upper_ci), 3)\n\n# 4. Visual 1: Fraction of negative revisions by president (red = R, blue = D)\n\ntd_pres <- ces_party_neg |>\n  group_by(president, party) |>\n  summarise(\n    Months           = n(),\n    FractionNegative = mean(negative, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |>\n  mutate(\n    President = factor(\n      president,\n      levels = c(\n        \"Carter\", \"Reagan\", \"Bush 41\", \"Clinton\",\n        \"Bush 43\", \"Obama\", \"Trump I\", \"Biden\", \"Trump II\"\n      )\n    )\n  )\n\nggplot(td_pres,\n       aes(x = President, y = FractionNegative, fill = party)) +\n  geom_col() +\n  scale_fill_manual(\n    values = c(\"D\" = \"#1F77B4\", \"R\" = \"#D62728\"),\n    labels = c(\"D\" = \"Democrat\", \"R\" = \"Republican\")\n  ) +\n  labs(\n    title = \"Share of Negative CES Revisions by President\",\n    x = \"President\",\n    y = \"Fraction of Negative Revisions\",\n    fill = \"Party\"\n  ) +\n  scale_y_continuous(labels = percent_format(accuracy = 1)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title  = element_text(face = \"bold\"),\n    axis.text.x = element_text(angle = 45, hjust = 1)\n  )\n\n# 5. Visual 2: Distribution of revisions by party (boxplot, red vs blue)\n\nggplot(ces_party_neg,\n       aes(x = party, y = revision, fill = party)) +\n  geom_boxplot(outlier.alpha = 0.2) +\n  scale_fill_manual(\n    values = c(\"D\" = \"#1F77B4\", \"R\" = \"#D62728\"),\n    labels = c(\"D\" = \"Democrat\", \"R\" = \"Republican\")\n  ) +\n  scale_x_discrete(\n    labels = c(\"D\" = \"Democrat\", \"R\" = \"Republican\")\n  ) +\n  labs(\n    title = \"Distribution of CES Revisions by Presidential Party\",\n    x = \"Party\",\n    y = \"Revision (thousands of jobs)\",\n    fill = \"Party\"\n  ) +\n  scale_y_continuous(labels = comma) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(face = \"bold\")\n  )\n\n```\n\nTest D: Are Negative CES Revisions More Common Under Democratic Presidents?\n\nTo evaluate the claim that the BLS produces more downward-corrected job numbers when Democrats are in office (meaning their initial bias is to publish higher job numbers during Democrat administrations) we tested whether negative revisions occur more frequently under Democratic presidents. \n\nThe hypotheses are:\n\nH₀: The proportion of negative CES revisions is the same under Democratic and Republican presidents.\n\nH₁: The proportion of negative revisions is higher under Democratic presidents.\n\nDuring the 1979–2025 period, 36 percent of CES revisions were negative during Democratic presidencies, compared with 48.1 percent during Republican presidencies. This already runs counter to the narrative: negative revisions were actually more common under Republicans.\n\nThe Welch t-test formalizes this comparison. The estimated difference in proportions (Democrat minus Republican) is: 0.121, meaning Republicans experienced a 12.1-percentage-point higher rate of negative revisions.\n\nThe 95 percent confidence interval ranges from 0.053 to for now, 1, indicating that the true difference is very likely positive. The p-value is 0.00184, which is far below the 0.05 significance threshold.\nBecause the p-value is extremely small, we reject the null hypothesis. There is strong statistical evidence that negative revisions were not more common under Democrats. In fact, they were significantly less common.\n\nThese results contradict the fictional commentator’s claim: the historical record shows that CES revisions were more frequently negative under Republican administrations, not Democratic ones."},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"output-file":"mp04.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.8.23","editor":"source","theme":"morph","title":"STA 9750 — Mini-Project 04","author":"Maham Hassan","date":"December 1, 2025"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}